# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: ¬´–ó–º–µ–π–∫–∞ –µ—Å—Ç –∫—Ä–æ–ª–∏–∫–æ–≤¬ª

> –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è –¢–ó. –Ø–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏—Å—Ç–∏–Ω—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
> –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-02-13

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#1-–æ–±—â–µ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ-–∏-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
2. [–†–µ–∂–∏–º—ã –∏–≥—Ä—ã](#2-—Ä–µ–∂–∏–º—ã-–∏–≥—Ä—ã)
3. [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ](#3-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
4. [–ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ](#4-–∏–≥—Ä–æ–≤–æ–µ-–ø–æ–ª–µ)
5. [–ó–º–µ–π–∫–∏](#5-–∑–º–µ–π–∫–∏)
6. [–ö—Ä–æ–ª–∏–∫–∏](#6-–∫—Ä–æ–ª–∏–∫–∏)
7. [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–µ–Ω](#7-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-—Å—Ç–µ–Ω)
8. [–ü–æ–±–µ–¥–∞, —É—Ä–æ–≤–Ω–∏, —Å—á—ë—Ç](#8-–ø–æ–±–µ–¥–∞-—É—Ä–æ–≤–Ω–∏-—Å—á—ë—Ç)
9. [–ë–æ—Ç—ã (AI)](#9-–±–æ—Ç—ã-ai)
10. [–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —ç–∫—Ä–∞–Ω—ã](#10-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å-–∏-—ç–∫—Ä–∞–Ω—ã)
11. [–í–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å](#11-–≤–∏–∑—É–∞–ª—å–Ω—ã–π-—Å—Ç–∏–ª—å)
12. [–†–µ–∂–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (dev mode)](#12-—Ä–µ–∂–∏–º-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-dev-mode)
13. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã](#13-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–∏-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
14. [–ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª (tick)](#14-–∏–≥—Ä–æ–≤–æ–π-—Ü–∏–∫–ª-tick)
15. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#15-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
16. [–¢–µ—Å—Ç—ã](#16-—Ç–µ—Å—Ç—ã)
17. [–≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#17-—ç—Ç–∞–ø—ã-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

---

## 1. –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### –û–ø–∏—Å–∞–Ω–∏–µ

¬´–ó–º–µ–π–∫–∞ –µ—Å—Ç –∫—Ä–æ–ª–∏–∫–æ–≤¬ª ‚Äî –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è 2D-–∏–≥—Ä–∞ –Ω–∞ HTML5 Canvas. –ò–≥—Ä–æ–∫ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–º–µ–π–∫–æ–π, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –ø–æ –∫–ª–µ—Ç–æ—á–Ω–æ–º—É –ø–æ–ª—é, –ø–æ–µ–¥–∞–µ—Ç –∫—Ä–æ–ª–∏–∫–æ–≤ (–∫–æ—Ç–æ—Ä—ã–µ –∂–∏–≤—É—Ç, —Å—Ç–∞—Ä–µ—é—Ç –∏ —Ä–∞–∑–º–Ω–æ–∂–∞—é—Ç—Å—è), –∏–∑–±–µ–≥–∞–µ—Ç —Å—Ç–µ–Ω –∏ –¥—Ä—É–≥–∏—Ö –∑–º–µ–µ–∫. –ò–≥—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç 0 –¥–æ 2 –∏–≥—Ä–æ–∫–æ–≤-–ª—é–¥–µ–π –∏ –æ—Ç 0 –¥–æ 4 –±–æ—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ò–≥—Ä–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ —É—Ä–æ–≤–Ω–∏ —Å –Ω–∞—Ä–∞—Å—Ç–∞—é—â–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| –Ø–∑—ã–∫ | TypeScript (strict mode) |
| –°–±–æ—Ä–∫–∞ | webpack (dev server + production build) |
| –†–µ–Ω–¥–µ—Ä | HTML5 Canvas 2D API |
| –¢–µ—Å—Ç—ã | Jest + ts-jest (—Å—Ä–µ–¥–∞ jsdom) |
| –í—ë—Ä—Å—Ç–∫–∞ | –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è, –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É —ç–∫—Ä–∞–Ω–∞ |
| –°—Ç–∏–ª–∏ | –¢–æ–ª—å–∫–æ CSS-–∫–ª–∞—Å—Å—ã –∏ CSS custom properties (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ). **Inline-—Å—Ç–∏–ª–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã** |
| –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ **—Ä—É—Å—Å–∫–æ–º** —è–∑—ã–∫–µ |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö | `localStorage` (—Ä–µ–∫–æ—Ä–¥—ã, –∏–º–µ–Ω–∞ –∏–≥—Ä–æ–∫–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ dev-—Ä–µ–∂–∏–º–∞) |
| –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ | `Math.floor()` –¥–ª—è –≤—Å–µ—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π, –¥–∞—é—â–∏—Ö –¥—Ä–æ–±–Ω–æ–µ —á–∏—Å–ª–æ |

### –ü—Ä–∏–Ω—Ü–∏–ø –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ –¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–ª–æ—è:

- **Engine** ‚Äî —á–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞: —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã, –¥–≤–∏–∂–µ–Ω–∏–µ, –∫–æ–ª–ª–∏–∑–∏–∏, —Å–ø–∞–≤–Ω, —Ñ–æ—Ä–º—É–ª—ã. –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç DOM –∏ Canvas. –ü–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è unit-—Ç–µ—Å—Ç–∞–º–∏.
- **Renderer** ‚Äî –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ Canvas. –ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏.

–í—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–∑–º–µ–π–∫–∏, –∫—Ä–æ–ª–∏–∫–∏, —Å—Ç–µ–Ω—ã) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–∞—Å—Å–∏–≤–∞—Ö –≤–Ω—É—Ç—Ä–∏ `GameState`. –î–≤—É–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ `board[][]` –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ —Å—É—â–Ω–æ—Å—Ç–µ–π –∫–∞–∂–¥—ã–π —Ç–∏–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ AI.

---

## 2. –†–µ–∂–∏–º—ã –∏–≥—Ä—ã

### –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ª—é–±—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è |
|---|---|
| –ò–≥—Ä–æ–∫–∏-–ª—é–¥–∏ | **0, 1 –∏–ª–∏ 2** (–Ω–µ –±–æ–ª–µ–µ 2) |
| –ë–æ—Ç—ã (AI) | **0, 1, 2, 3 –∏–ª–∏ 4** |
| –°—É–º–º–∞—Ä–Ω–æ –∑–º–µ–µ–∫ | –û—Ç 1 –¥–æ 6 |

#### –†–µ–∂–∏–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è (0 –∏–≥—Ä–æ–∫–æ–≤)

–ï—Å–ª–∏ –∏–≥—Ä–æ–∫–æ–≤-–ª—é–¥–µ–π **0**, –±–æ—Ç—ã –∏–≥—Ä–∞—é—Ç –º–µ–∂–¥—É —Å–æ–±–æ–π. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–æ–ª—å–∫–æ –Ω–∞–±–ª—é–¥–∞–µ—Ç. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π –Ω–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∏ –∫ –æ–¥–Ω–æ–π –∑–º–µ–π–∫–µ. –ü–∞—É–∑–∞ –ø–æ –ø—Ä–æ–±–µ–ª—É –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–∞.

#### –û–¥–∏–Ω–æ—á–Ω—ã–π —Ä–µ–∂–∏–º (1 –∏–≥—Ä–æ–∫, 0 –±–æ—Ç–æ–≤)

–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∑–º–µ–π–∫–∞: –æ–¥–∏–Ω –∏–≥—Ä–æ–∫, —Ü–µ–ª—å ‚Äî –Ω–∞–±—Ä–∞—Ç—å –∫—É–º—É–ª—è—Ç–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥ –∫—Ä–æ–ª–∏–∫–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º.

#### –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π / —Å–º–µ—à–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º

–õ—é–±–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Å ‚â•2 –∑–º–µ–π–∫–∞–º–∏. –£—Ä–æ–≤–µ–Ω—å –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –ø–æ –≤—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏ –∏–ª–∏ —Ç–∞–π–º–µ—Ä—É.

### –°–ª–æ–∂–Ω–æ—Å—Ç—å

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| –î–∏–∞–ø–∞–∑–æ–Ω | **1‚Äì10** (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ) |
| –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | **1** |
| –í—ã–±–∏—Ä–∞–µ—Ç—Å—è | –í –º–µ–Ω—é –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∏–≥—Ä—ã |

–°–ª–æ–∂–Ω–æ—Å—Ç—å –≤–ª–∏—è–µ—Ç –Ω–∞:
- –î–ª–∏–Ω—É –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö —Å—Ç–µ–Ω (–±–æ–ª—å—à–µ ‚Üí –¥–ª–∏–Ω–Ω–µ–µ)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –∫—Ä–æ–ª–∏–∫–æ–≤ (–±–æ–ª—å—à–µ ‚Üí –º–µ–Ω—å—à–µ –∫—Ä–æ–ª–∏–∫–æ–≤)

---

## 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–º–µ–π–∫–∞–º–∏

–ò–≥—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤—É–º—è –∏–≥—Ä–æ–∫–∞–º–∏ –Ω–∞ –æ–¥–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ:

| –ò–≥—Ä–æ–∫ | –í–≤–µ—Ä—Ö | –í–ª–µ–≤–æ | –í–Ω–∏–∑ | –í–ø—Ä–∞–≤–æ |
|-------|-------|-------|------|--------|
| –ò–≥—Ä–æ–∫ 1 | `W` | `A` | `S` | `D` |
| –ò–≥—Ä–æ–∫ 2 | `‚Üë` (ArrowUp) | `‚Üê` (ArrowLeft) | `‚Üì` (ArrowDown) | `‚Üí` (ArrowRight) |

–ö–∞–∂–¥—ã–π –Ω–∞–±–æ—Ä –∫–ª–∞–≤–∏—à –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∑–º–µ–π–∫–µ –ø–æ –ø–æ—Ä—è–¥–∫—É: –ø–µ—Ä–≤—ã–π —á–µ–ª–æ–≤–µ–∫ –≤ —Å–ø–∏—Å–∫–µ ‚Äî WASD, –≤—Ç–æ—Ä–æ–π ‚Äî —Å—Ç—Ä–µ–ª–∫–∏.

#### –ü—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–≤–æ–¥–∞

1. **–ó–∞–ø—Ä–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –Ω–∞ 180¬∞**: –µ—Å–ª–∏ –∑–º–µ–π–∫–∞ –¥–≤–∏–∂–µ—Ç—Å—è –≤–ø—Ä–∞–≤–æ, –Ω–∞–∂–∞—Ç–∏–µ ¬´–≤–ª–µ–≤–æ¬ª –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –≤—Å–µ—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π. –ó–º–µ–π–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–µ–∂–Ω–µ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.
2. **–û–¥–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞ —Ç–∏–∫**: –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –Ω–∞–∂–∞–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∞–≤–∏—à –º–µ–∂–¥—É —Ç–∏–∫–∞–º–∏, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **–ø–æ—Å–ª–µ–¥–Ω–µ–µ** –Ω–∞–∂–∞—Ç–∏–µ (–∫–æ—Ç–æ—Ä–æ–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–º –Ω–∞ 180¬∞).
3. **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ —Ç–∏–∫–∞**, –¥–æ —Ä–∞—Å—á—ë—Ç–∞ –¥–≤–∏–∂–µ–Ω–∏—è.

### –ü–∞—É–∑–∞

| –ö–ª–∞–≤–∏—à–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| **Space** (–ü—Ä–æ–±–µ–ª) | –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ ‚Äî –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è |

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à–∏ ¬´–ü—Ä–æ–±–µ–ª¬ª:

| –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Space |
|-------------------|----------------------------------|
| –ò–≥—Ä–∞ –∏–¥—ë—Ç (–Ω–µ—Ç –º–æ–¥–∞–ª–∫–∏) | –°—Ç–∞–≤–∏—Ç –∏–≥—Ä—É –Ω–∞ **–ø–∞—É–∑—É**: game loop –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ¬´–ü–ê–£–ó–ê¬ª |
| –ú–æ–¥–∞–ª–∫–∞ ¬´–ü–ê–£–ó–ê¬ª | –°–Ω–∏–º–∞–µ—Ç –ø–∞—É–∑—É: –º–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, game loop –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É |
| –ú–æ–¥–∞–ª–∫–∞ ¬´–ö–æ–Ω–µ—Ü —É—Ä–æ–≤–Ω—è¬ª | –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É—Ä–æ–≤–Ω—é (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∫–Ω–æ–ø–∫–µ ¬´–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å¬ª) |
| –ú–æ–¥–∞–ª–∫–∞ ¬´–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞¬ª | –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |

–í–æ –≤—Ä–µ–º—è –ø–∞—É–∑—ã:
- Game loop –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (—Ç–∏–∫–∏ –Ω–µ –∏–¥—É—Ç)
- –¢–∞–π–º–µ—Ä —É—Ä–æ–≤–Ω—è –Ω–µ —É–±—ã–≤–∞–µ—Ç
- Canvas –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –∫–∞–¥—Ä–µ
- –ü–æ–≤–µ—Ä—Ö –ø–æ–ª—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∑–∞—Ç–µ–º–Ω—ë–Ω–Ω—ã–º overlay

–í **dev-—Ä–µ–∂–∏–º–µ** –º–æ–¥–∞–ª–∫–∞ –ø–∞—É–∑—ã –ø–æ–∫—Ä—ã–≤–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –∏–≥—Ä–æ–≤—É—é –æ–±–ª–∞—Å—Ç—å** (canvas, HUD-–ø–∞–Ω–µ–ª–∏), –Ω–æ **–Ω–µ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫** —Å–ø—Ä–∞–≤–∞ ‚Äî –æ–Ω–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–π.
## 4. –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ

### –†–∞–∑–º–µ—Ä –ø–æ–ª—è

–†–∞–∑–º–µ—Ä –ø–æ–ª—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è:

```
—à–∏—Ä–∏–Ω–∞ = baseWidth  + (level ‚àí 1) √ó levelSizeIncrement
–≤—ã—Å–æ—Ç–∞ = baseHeight + (level ‚àí 1) √ó levelSizeIncrement
```

–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∏–∑ `gameDefaults.json`):

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| `baseWidth` | 40 |
| `baseHeight` | 40 |
| `levelSizeIncrement` | 5 |

–ü—Ä–∏–º–µ—Ä—ã: —É—Ä–æ–≤–µ–Ω—å 1 ‚Äî 40√ó40, —É—Ä–æ–≤–µ–Ω—å 2 ‚Äî 45√ó45, —É—Ä–æ–≤–µ–Ω—å 3 ‚Äî 50√ó50.

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (engine)

–ü–æ–ª–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –¥–≤—É–º–µ—Ä–Ω—ã–º –º–∞—Å—Å–∏–≤–æ–º `CellContent[][]`, –≥–¥–µ `CellContent = ' ' | '&' | '*' | '#'`:

| –°–∏–º–≤–æ–ª | –ó–Ω–∞—á–µ–Ω–∏–µ |
|--------|----------|
| `' '` (–ø—Ä–æ–±–µ–ª) | –ü—É—Å—Ç–∞—è –∫–ª–µ—Ç–∫–∞ |
| `'&'` | –ö—Ä–æ–ª–∏–∫ |
| `'*'` | –°—Ç–µ–Ω–∞ / –ø—Ä–µ–≥—Ä–∞–¥–∞ |
| `'#'` | –°–µ–≥–º–µ–Ω—Ç —Ç–µ–ª–∞ –∑–º–µ–π–∫–∏ |

–ú–∞—Å—Å–∏–≤ `board[][]` **–ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ —Å—É—â–Ω–æ—Å—Ç–µ–π** –∫–∞–∂–¥—ã–π —Ç–∏–∫ (–Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Ç–µ—Ä-–¥–∞–Ω–Ω—ã–º–∏). –ú–∞—Å—Ç–µ—Ä-–¥–∞–Ω–Ω—ã–µ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã `state.walls`, `state.rabbits`, `state.snakes`.

### –ì—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—è

–ì—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—è —è–≤–ª—è—é—Ç—Å—è –Ω–µ–ø—Ä–æ—Ö–æ–¥–∏–º—ã–º–∏: –≤—ã—Ö–æ–¥ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç `[0, width)` √ó `[0, height)` —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ–º —Å–æ —Å—Ç–µ–Ω–æ–π –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–º–µ—Ä—Ç—å –∑–º–µ–π–∫–∏. –û—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç–µ–Ω –ø–æ –ø–µ—Ä–∏–º–µ—Ç—Ä—É –Ω–µ—Ç ‚Äî –≥—Ä–∞–Ω–∏—Ü–∞ –Ω–µ—è–≤–Ω–∞—è.

### –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

- –û—Å—å **X** ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è, —Ä–∞—Å—Ç—ë—Ç —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ (0 = –ª–µ–≤—ã–π –∫—Ä–∞–π).
- –û—Å—å **Y** ‚Äî –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è, —Ä–∞—Å—Ç—ë—Ç —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑ (0 = –≤–µ—Ä—Ö–Ω–∏–π –∫—Ä–∞–π).
- –ö–ª–µ—Ç–∫–∞ `(x, y)` —Ä–∏—Å—É–µ—Ç—Å—è –∫–∞–∫ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ `[x √ó cellSize, y √ó cellSize, cellSize, cellSize]`.

---

## 5. –ó–º–µ–π–∫–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–ö–∞–∂–¥–∞—è –∑–º–µ–π–∫–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ –æ–±—ä–µ–∫—Ç `Snake`:

```typescript
interface Snake {
  id: number;               // —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (0, 1, 2‚Ä¶)
  name: string;             // –∏–º—è (–∏–∑ –º–µ–Ω—é –∏–ª–∏ ¬´–ë–æ—Ç N¬ª)
  segments: Position[];     // –º–∞—Å—Å–∏–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, segments[0] = –≥–æ–ª–æ–≤–∞
  direction: Direction;     // —Ç–µ–∫—É—â–µ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ('up' | 'down' | 'left' | 'right')
  alive: boolean;           // –∂–∏–≤–∞ –ª–∏
  score: number;            // –æ—á–∫–∏ (= –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—ä–µ–¥–µ–Ω–Ω—ã—Ö –∫—Ä–æ–ª–∏–∫–æ–≤)
  levelsWon: number;        // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π
  ticksWithoutFood: number; // —Ç–∏–∫–æ–≤ –±–µ–∑ –µ–¥—ã (–¥–ª—è –º–µ—Ö–∞–Ω–∏–∫–∏ –≥–æ–ª–æ–¥–∞)
  isBot: boolean;           // —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ª–∏ AI
  deathReason?: string;     // –ø—Ä–∏—á–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏ (–µ—Å–ª–∏ –º–µ—Ä—Ç–≤–∞)
}
```

### –ù–∞—á–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|---|---|
| –ù–∞—á–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ | **5** —Å–µ–≥–º–µ–Ω—Ç–æ–≤ (`initialSnakeLength`) |
| –ù–∞—á–∞–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏ |
| `ticksWithoutFood` | 0 |
| `score` | 0 |
| `levelsWon` | –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏ |

### –°—Ç–∞—Ä—Ç–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏

–ó–º–µ–π–∫–∏ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ø–æ –ø–æ–ª—é. –°—Ç–∞—Ä—Ç–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–ª—è –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–º–µ–µ–∫. –ú–µ–∂–¥—É —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–µ–π –∏ –∫—Ä–∞–µ–º –ø–æ–ª—è –æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –æ—Ç—Å—Ç—É–ø –Ω–µ –º–µ–Ω–µ–µ `initialSnakeLength + 2` –∫–ª–µ—Ç–æ–∫.

–¢–µ–ª–æ –∑–º–µ–π–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –≤—ã—Ç—è–Ω—É—Ç–æ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏, **–ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–º** –Ω–∞—á–∞–ª—å–Ω–æ–º—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –¥–≤–∏–∂–µ–Ω–∏—è. –ü—Ä–∏–º–µ—Ä: –µ—Å–ª–∏ –∑–º–µ–π–∫–∞ —Å—Ç–∞—Ä—Ç—É–µ—Ç –≤ –ø–æ–∑–∏—Ü–∏–∏ `(7, 20)` —Å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º `right`, –µ—ë –≥–æ–ª–æ–≤–∞ –≤ `(7, 20)`, —Å–ª–µ–¥—É—é—â–∏–π —Å–µ–≥–º–µ–Ω—Ç –≤ `(6, 20)`, –ø–æ—Ç–æ–º `(5, 20)` –∏ —Ç.–¥.

### –î–≤–∏–∂–µ–Ω–∏–µ

1. –ö–∞–∂–¥—ã–π —Ç–∏–∫ –∑–º–µ–π–∫–∞ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è —Ä–æ–≤–Ω–æ –Ω–∞ **1 –∫–ª–µ—Ç–∫—É** –≤ —Ç–µ–∫—É—â–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏.
2. –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫:
   - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–æ–≤–æ–π –≥–æ–ª–æ–≤—ã (`getNextHeadPosition`).
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –≥–æ–ª–æ–≤—ã –≤ –Ω–∞—á–∞–ª–æ –º–∞—Å—Å–∏–≤–∞ `segments`.
   - –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ (—Ö–≤–æ—Å—Ç–∞) ‚Äî –µ—Å–ª–∏ –∑–º–µ–π–∫–∞ –ù–ï –µ—Å—Ç –∫—Ä–æ–ª–∏–∫–∞.
   - –ï—Å–ª–∏ –∑–º–µ–π–∫–∞ –µ—Å—Ç –∫—Ä–æ–ª–∏–∫–∞ ‚Äî —Ö–≤–æ—Å—Ç –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è, –∑–º–µ–π–∫–∞ —Ä–∞—Å—Ç—ë—Ç –Ω–∞ 1.

### –°–º–µ—Ä—Ç—å –∑–º–µ–π–∫–∏

–ó–º–µ–π–∫–∞ –ø–æ–≥–∏–±–∞–µ—Ç (–ø–æ–ª–µ `alive = false`) –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:

| –ü—Ä–∏—á–∏–Ω–∞ | –ö–æ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è | `deathReason` |
|---------|-------------------|---------------|
| **–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å–æ —Å—Ç–µ–Ω–æ–π** | –ù–æ–≤–∞—è –≥–æ–ª–æ–≤–∞ –ø–æ–ø–∞–ª–∞ –Ω–∞ —Å—Ç–µ–Ω—É –∏–ª–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—É –ø–æ–ª—è | `'–í—Ä–µ–∑–∞–ª–∞—Å—å –≤ —Å—Ç–µ–Ω—É'` |
| **–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –¥—Ä—É–≥–æ–π –∑–º–µ–π–∫–æ–π** | –ù–æ–≤–∞—è –≥–æ–ª–æ–≤–∞ –ø–æ–ø–∞–ª–∞ –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç –¥—Ä—É–≥–æ–π –∂–∏–≤–æ–π –∑–º–µ–π–∫–∏ | `'–°—Ç–æ–ª–∫–Ω—É–ª–∞—Å—å —Å –¥—Ä—É–≥–æ–π –∑–º–µ–π–∫–æ–π'` |
| **–°–∞–º–æ—É–∫—É—Å** | –ü–æ—Å–ª–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≥–æ–ª–æ–≤–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ª—é–±—ã–º –¥—Ä—É–≥–∏–º —Å–µ–≥–º–µ–Ω—Ç–æ–º —Ç–æ–π –∂–µ –∑–º–µ–π–∫–∏ | `'–°—ä–µ–ª–∞ —Å–∞–º—É —Å–µ–±—è'` |
| **–ì–æ–ª–æ–¥** | –ü–æ—Å–ª–µ –ø–æ—Ç–µ—Ä–∏ —Å–µ–≥–º–µ–Ω—Ç–∞ –¥–ª–∏–Ω–∞ —Å—Ç–∞–ª–∞ < `minSnakeLength` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2) | `'–£–º–µ—Ä–ª–∞ —Å –≥–æ–ª–æ–¥—É'` |

#### –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ —Ç–∏–∫–µ:

1. –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è –≥–æ–ª–æ–≤—ã.
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å–æ —Å—Ç–µ–Ω–æ–π ‚Üí –µ—Å–ª–∏ –¥–∞, –∑–º–µ–π–∫–∞ –ø–æ–≥–∏–±–∞–µ—Ç, **–ø—Ä–æ–ø—É—Å–∫ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —à–∞–≥–æ–≤**.
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –∑–º–µ–π–∫–∞–º–∏ ‚Üí –µ—Å–ª–∏ –¥–∞, –∑–º–µ–π–∫–∞ –ø–æ–≥–∏–±–∞–µ—Ç.
4. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ (–≥–æ–ª–æ–≤–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è, —Ö–≤–æ—Å—Ç —É–¥–∞–ª—è–µ—Ç—Å—è –∏–ª–∏ –Ω–µ—Ç).
5. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–∞–º–æ—É–∫—É—Å ‚Üí –µ—Å–ª–∏ –¥–∞, –∑–º–µ–π–∫–∞ –ø–æ–≥–∏–±–∞–µ—Ç.
6. –ï—Å–ª–∏ –Ω–æ–≤–∞—è –≥–æ–ª–æ–≤–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø–æ–∑–∏—Ü–∏–µ–π –∫—Ä–æ–ª–∏–∫–∞ ‚Üí –∫—Ä–æ–ª–∏–∫ —Å—ä–µ–¥–∞–µ—Ç—Å—è.

### –ü–æ–µ–¥–∞–Ω–∏–µ –∫—Ä–æ–ª–∏–∫–æ–≤

–ö–æ–≥–¥–∞ –≥–æ–ª–æ–≤–∞ –∑–º–µ–π–∫–∏ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∫–ª–µ—Ç–∫–µ, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫—Ä–æ–ª–∏–∫:

1. –ö—Ä–æ–ª–∏–∫ **—É–¥–∞–ª—è–µ—Ç—Å—è** –∏–∑ –º–∞—Å—Å–∏–≤–∞ `state.rabbits`.
2. –ó–º–µ–π–∫–∞ **—Ä–∞—Å—Ç—ë—Ç** –Ω–∞ 1 —Å–µ–≥–º–µ–Ω—Ç (—Ö–≤–æ—Å—Ç –Ω–µ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ—Ç —Ç–∏–∫).
3. –°—á—ë—Ç –∑–º–µ–π–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ **+1** (`snake.score++`).
4. –°—á—ë—Ç—á–∏–∫ –≥–æ–ª–æ–¥–∞ **—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è** (`snake.ticksWithoutFood = 0`).

### –ì–æ–ª–æ–¥

–ú–µ—Ö–∞–Ω–∏–∫–∞ –≥–æ–ª–æ–¥–∞ —Å—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç –∑–º–µ–π–∫—É –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–∫–∞—Ç—å –ø–∏—â—É:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|---|---|
| `hungerThreshold` | **15** —Ç–∏–∫–æ–≤ |
| `minSnakeLength` | **2** —Å–µ–≥–º–µ–Ω—Ç–∞ |

**–ê–ª–≥–æ—Ä–∏—Ç–º (–∫–∞–∂–¥—ã–π —Ç–∏–∫, –ø–æ—Å–ª–µ –¥–≤–∏–∂–µ–Ω–∏—è):**

1. `ticksWithoutFood++`.
2. –ï—Å–ª–∏ `ticksWithoutFood >= hungerThreshold`:
   - –£–¥–∞–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç (—Ö–≤–æ—Å—Ç) ‚Äî –∑–º–µ–π–∫–∞ —É–∫–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1.
   - `ticksWithoutFood` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ **0**.
   - –ï—Å–ª–∏ `segments.length < minSnakeLength` ‚Üí –∑–º–µ–π–∫–∞ **–ø–æ–≥–∏–±–∞–µ—Ç** —Å –ø—Ä–∏—á–∏–Ω–æ–π `'–£–º–µ—Ä–ª–∞ —Å –≥–æ–ª–æ–¥—É'`.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –µ—Å–ª–∏ –∑–º–µ–π–∫–∞ –Ω–µ –µ—Å—Ç, –æ–Ω–∞ —Ç–µ—Ä—è–µ—Ç –ø–æ 1 —Å–µ–≥–º–µ–Ω—Ç—É –∫–∞–∂–¥—ã–µ `hungerThreshold` —Ç–∏–∫–æ–≤, –ø–æ–∫–∞ –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –º–µ–Ω–µ–µ 2 —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –∏ –Ω–µ —É–º—Ä—ë—Ç.

### –ú—ë—Ä—Ç–≤—ã–µ –∑–º–µ–π–∫–∏

–ü–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏ –∑–º–µ–π–∫–∞ **–Ω–µ –∏—Å—á–µ–∑–∞–µ—Ç** —Å –ø–æ–ª—è:

- –ï—ë —Ç–µ–ª–æ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ –¥–æ –∫–æ–Ω—Ü–∞ —É—Ä–æ–≤–Ω—è.
- –í–∏–∑—É–∞–ª—å–Ω–æ –º—ë—Ä—Ç–≤–∞—è –∑–º–µ–π–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **—Å–µ—Ä—ã–º —Ü–≤–µ—Ç–æ–º** (–æ–±–µ—Å—Ü–≤–µ—á–∏–≤–∞–Ω–∏–µ).
- –ö–æ–ª–ª–∏–∑–∏–∏ —Å –º—ë—Ä—Ç–≤—ã–º–∏ –∑–º–µ–π–∫–∞–º–∏ **–Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è** (–¥—Ä—É–≥–∏–µ –∑–º–µ–π–∫–∏ –º–æ–≥—É—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Å–∫–≤–æ–∑—å –º—ë—Ä—Ç–≤–æ–µ —Ç–µ–ª–æ).

### –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–º–µ–π–∫–∏

#### –¢–µ–ª–æ (–∂–∏–≤–∞—è –∑–º–µ–π–∫–∞)

- –ö–∞–∂–¥—ã–π —Å–µ–≥–º–µ–Ω—Ç –∑–∞–Ω–∏–º–∞–µ—Ç –æ–¥–Ω—É –∫–ª–µ—Ç–∫—É (`cellSize √ó cellSize`).
- –ó–∞–ª–∏–≤–∫–∞: **–±–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç** –∑–º–µ–π–∫–∏ (–∏–∑ –ø–∞–ª–∏—Ç—Ä—ã `snakeColors`).
- –û–±–≤–æ–¥–∫–∞ –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞: —Ç–æ–Ω–∫–∞—è –ª–∏–Ω–∏—è (`lineWidth: 1`), —Ü–≤–µ—Ç –Ω–∞ **35% —Ç–µ–º–Ω–µ–µ** –±–∞–∑–æ–≤–æ–≥–æ.

#### –ì–æ–ª–æ–≤–∞ (–∂–∏–≤–∞—è –∑–º–µ–π–∫–∞)

- –ó–∞–ª–∏–≤–∫–∞: –±–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç, –∑–∞—Ç–µ–º–Ω—ë–Ω–Ω—ã–π –Ω–∞ **25%** (—Ç–µ–º–Ω–µ–µ —Ç–µ–ª–∞).
- –û–±–≤–æ–¥–∫–∞: **–±–µ–ª—ã–π** (`colorHeadStroke`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `#FFFFFF`), `lineWidth: 1`.
- –î–≤–∞ **—á—ë—Ä–Ω—ã—Ö –≥–ª–∞–∑–∫–∞**: –º–∞–ª–µ–Ω—å–∫–∏–µ –∫—Ä—É–≥–∏ (`radius = max(1, cellSize √ó 0.12)`), —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è. –û—Ç—Å—Ç—É–ø –æ—Ç –∫—Ä–∞—è –∫–ª–µ—Ç–∫–∏: `cellSize √ó 0.25`.
  - –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `up` ‚Üí –≥–ª–∞–∑–∞ —É –≤–µ—Ä—Ö–Ω–µ–≥–æ –∫—Ä–∞—è (–ª–µ–≤—ã–π –∏ –ø—Ä–∞–≤—ã–π).
  - –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `down` ‚Üí –≥–ª–∞–∑–∞ —É –Ω–∏–∂–Ω–µ–≥–æ –∫—Ä–∞—è.
  - –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `left` ‚Üí –≥–ª–∞–∑–∞ —É –ª–µ–≤–æ–≥–æ –∫—Ä–∞—è (–≤–µ—Ä—Ö–Ω–∏–π –∏ –Ω–∏–∂–Ω–∏–π).
  - –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `right` ‚Üí –≥–ª–∞–∑–∞ —É –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—è.

#### –ú—ë—Ä—Ç–≤–∞—è –∑–º–µ–π–∫–∞

- –í—Å–µ —Å–µ–≥–º–µ–Ω—Ç—ã (–≤–∫–ª—é—á–∞—è –≥–æ–ª–æ–≤—É) –∑–∞–∫—Ä–∞—à–∏–≤–∞—é—Ç—Å—è **—Å–µ—Ä—ã–º** (–æ–±–µ—Å—Ü–≤–µ—á–µ–Ω–Ω—ã–π –±–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç: `grey = round(r√ó0.3 + g√ó0.3 + b√ó0.3)`).
- –û–±–≤–æ–¥–∫–∞ –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞: —Ü–≤–µ—Ç –Ω–∞ **35% —Ç–µ–º–Ω–µ–µ** —Å–µ—Ä–æ–≥–æ.
- –ì–ª–∞–∑–∫–∏ **–Ω–µ —Ä–∏—Å—É—é—Ç—Å—è**.

#### –ü–∞–ª–∏—Ç—Ä–∞ –∑–º–µ–µ–∫

–¶–≤–µ—Ç–∞ –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è –ø–æ –ø–æ—Ä—è–¥–∫—É (–ø–æ `snake.id`):

| # | –¶–≤–µ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|---|---|
| 0 | `#00FF00` (–∑–µ–ª—ë–Ω—ã–π) |
| 1 | `#00CCFF` (–≥–æ–ª—É–±–æ–π) |
| 2 | `#FFFF00` (–∂—ë–ª—Ç—ã–π) |
| 3 | `#FF00FF` (–ø—É—Ä–ø—É—Ä–Ω—ã–π) |
| 4 | `#FF8800` (–æ—Ä–∞–Ω–∂–µ–≤—ã–π) |
| 5 | `#88FF88` (—Å–≤–µ—Ç–ª–æ-–∑–µ–ª—ë–Ω—ã–π) |

–ï—Å–ª–∏ –∑–º–µ–µ–∫ –±–æ–ª—å—à–µ —á–µ–º —Ü–≤–µ—Ç–æ–≤ ‚Äî –ø–∞–ª–∏—Ç—Ä–∞ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–µ—Ç—Å—è.
## 6. –ö—Ä–æ–ª–∏–∫–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```typescript
interface Rabbit {
  pos: Position;            // –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –∫–ª–µ—Ç–∫–∏ {x, y}
  age: number;              // –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –≤ —Ç–∏–∫–∞—Ö —Å –º–æ–º–µ–Ω—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è)
  clockNum: number;         // —Ç–∏–∫–æ–≤ —Å –º–æ–º–µ–Ω—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –∏–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏—è (—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏–∏)
  reproductionCount: number; // —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ —ç—Ç–æ—Ç –∫—Ä–æ–ª–∏–∫ —É–∂–µ —Ä–∞–∑–º–Ω–æ–∂–∏–ª—Å—è
}

type RabbitPhase = 'young' | 'adult' | 'old';
```

### –ù–∞—á–∞–ª—å–Ω—ã–π —Å–ø–∞–≤–Ω –∫—Ä–æ–ª–∏–∫–æ–≤

–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —É—Ä–æ–≤–Ω—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞—á–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–æ–ª–∏–∫–æ–≤ –ø–æ —Ñ–æ—Ä–º—É–ª–µ:

```
rabbitCount = Math.floor(rabbitCountPerSnakeCoeff √ó snakeCount + rabbitCountBase ‚àí difficultyLevel)
```

–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `rabbitCountPerSnakeCoeff = 1.5`, `rabbitCountBase = 10`.

–ü—Ä–∏–º–µ—Ä: 1 –∑–º–µ–π–∫–∞, —Å–ª–æ–∂–Ω–æ—Å—Ç—å 1 ‚Üí `Math.floor(1.5 √ó 1 + 10 ‚àí 1) = 10` –∫—Ä–æ–ª–∏–∫–æ–≤.

#### –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –ø—Ä–∏ —Å–ø–∞–≤–Ω–µ

–ö–∞–∂–¥—ã–π –∫—Ä–æ–ª–∏–∫ —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ **—Å–ª—É—á–∞–π–Ω–æ–π** –∫–ª–µ—Ç–∫–µ, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–µ–π –≤—Å–µ–º —É—Å–ª–æ–≤–∏—è–º:

1. **–ù–µ –Ω–∞ —Å—Ç–µ–Ω–µ**: –∫–ª–µ—Ç–∫–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç –Ω–∏ —Å –æ–¥–Ω–æ–π —Å—Ç–µ–Ω–æ–π.
2. **–ù–µ –Ω–∞ –∑–º–µ–π–∫–µ**: –∫–ª–µ—Ç–∫–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç –Ω–∏ —Å –æ–¥–Ω–∏–º —Å–µ–≥–º–µ–Ω—Ç–æ–º –Ω–∏ –æ–¥–Ω–æ–π –∑–º–µ–π–∫–∏.
3. **–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –¥—Ä—É–≥–∏—Ö –∫—Ä–æ–ª–∏–∫–æ–≤**: —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ß–µ–±—ã—à—ë–≤–∞ –¥–æ –ª—é–±–æ–≥–æ —Ä–∞–Ω–µ–µ —Ä–∞–∑–º–µ—â—ë–Ω–Ω–æ–≥–æ –∫—Ä–æ–ª–∏–∫–∞ **> 1** (—Ç.–µ. –º–∏–Ω–∏–º—É–º 2 –∫–ª–µ—Ç–∫–∏). –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ß–µ–±—ã—à—ë–≤–∞: `max(|x1‚àíx2|, |y1‚àíy2|)`.
4. **–í–Ω—É—Ç—Ä–∏ –≥—Ä–∞–Ω–∏—Ü –ø–æ–ª—è**: `0 ‚â§ x < width`, `0 ‚â§ y < height`.

–ï—Å–ª–∏ –∑–∞ `count √ó 100` –ø–æ–ø—ã—Ç–æ–∫ –Ω–µ —É–¥–∞–ª–æ—Å—å —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤—Å–µ –∫—Ä–æ–ª–∏–∫–æ–≤ ‚Äî —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è —Å—Ç–æ–ª—å–∫–æ, —Å–∫–æ–ª—å–∫–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å.

–í—Å–µ –Ω–∞—á–∞–ª—å–Ω—ã–µ –∫—Ä–æ–ª–∏–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å `age = 0`, `clockNum = 0`, `reproductionCount = 0`.

---

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫—Ä–æ–ª–∏–∫–æ–≤

–£ –∫–∞–∂–¥–æ–≥–æ –∫—Ä–æ–ª–∏–∫–∞ –µ—Å—Ç—å **–∞–±—Å–æ–ª—é—Ç–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç** (`age`), –∫–æ—Ç–æ—Ä—ã–π —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1 –∫–∞–∂–¥—ã–π —Ç–∏–∫. –í–æ–∑—Ä–∞—Å—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ–∞–∑—É –∂–∏–∑–Ω–∏:

| –§–∞–∑–∞ | –î–∏–∞–ø–∞–∑–æ–Ω `age` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) | –ü–æ–≤–µ–¥–µ–Ω–∏–µ |
|------|------|-----------|
| **–ú–æ–ª–æ–¥–æ—Å—Ç—å** (`young`) | `0 ‚â§ age < 50` | –ù–µ –º–æ–∂–µ—Ç —Ä–∞–∑–º–Ω–æ–∂–∞—Ç—å—Å—è. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –º–∞–ª–µ–Ω—å–∫–∏–º –∫—Ä—É–∂–∫–æ–º —Å–≤–µ—Ç–ª–æ-–∫—Ä–∞—Å–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ |
| **–í–∑—Ä–æ—Å–ª–æ—Å—Ç—å** (`adult`) | `50 ‚â§ age < 100` | –ú–æ–∂–µ—Ç —Ä–∞–∑–º–Ω–æ–∂–∞—Ç—å—Å—è. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫—Ä—É–∂–∫–æ–º –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –∫—Ä–∞—Å–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ |
| **–°—Ç–∞—Ä–æ—Å—Ç—å** (`old`) | `100 ‚â§ age < 150` | –ù–µ –º–æ–∂–µ—Ç —Ä–∞–∑–º–Ω–æ–∂–∞—Ç—å—Å—è. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫—Ä—É–∂–∫–æ–º –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, —Ü–≤–µ—Ç —Ç–µ–º–Ω–µ–µ –≤–∑—Ä–æ—Å–ª–æ–≥–æ |

–ù–∞ —Ç–∏–∫–µ, –∫–æ–≥–¥–∞ `age` –¥–æ—Å—Ç–∏–≥–∞–µ—Ç `maxAge` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **150**), –∫—Ä–æ–ª–∏–∫ **—É–¥–∞–ª—è–µ—Ç—Å—è** —Å –ø–æ–ª—è (—É–º–∏—Ä–∞–µ—Ç –æ—Ç —Å—Ç–∞—Ä–æ—Å—Ç–∏).

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ (–∏–∑ `gameDefaults.json`)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| `youngAge` | 50 | –ì—Ä–∞–Ω–∏—Ü–∞ young/adult |
| `adultAge` | 100 | –ì—Ä–∞–Ω–∏—Ü–∞ adult/old |
| `maxAge` | 150 | –¢–∏–∫ –≥–∏–±–µ–ª–∏ –æ—Ç —Å—Ç–∞—Ä–æ—Å—Ç–∏ |

#### –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫—Ä–æ–ª–∏–∫–æ–≤

–ö—Ä–æ–ª–∏–∫–∏ —Ä–∏—Å—É—é—Ç—Å—è –Ω–∞ canvas –∫–∞–∫ **–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫—Ä—É–≥–∏** (–Ω–µ –∫–≤–∞–¥—Ä–∞—Ç—ã):

| –§–∞–∑–∞ | –¶–≤–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) | –†–∞–¥–∏—É—Å |
|------|-----|--------|
| `young` | `#FF6666` (—Å–≤–µ—Ç–ª–æ-–∫—Ä–∞—Å–Ω—ã–π) | `cellSize √ó 0.28` (–º–∞–ª–µ–Ω—å–∫–∏–π) |
| `adult` | `#FF0000` (–∫—Ä–∞—Å–Ω—ã–π) | `cellSize √ó 0.42` (–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π) |
| `old` | `#990000` (—Ç—ë–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π) | `cellSize √ó 0.42` (–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π) |

–ö—Ä—É–≥ —Ä–∏—Å—É–µ—Ç—Å—è –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–ª–µ—Ç–∫–∏: `(x √ó cellSize + cellSize/2, y √ó cellSize + cellSize/2)`.

---

### –†–∞–∑–º–Ω–æ–∂–µ–Ω–∏–µ –∫—Ä–æ–ª–∏–∫–æ–≤

–†–∞–∑–º–Ω–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–∫–∞–∂–¥—ã–π —Ç–∏–∫** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∂–∏–≤–æ–≥–æ –∫—Ä–æ–ª–∏–∫–∞. –ö—Ä–æ–ª–∏–∫ –º–æ–∂–µ—Ç —Ä–∞–∑–º–Ω–æ–∂–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ **–≤—Å–µ—Ö** —É—Å–ª–æ–≤–∏–π:

#### –£—Å–ª–æ–≤–∏—è —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏—è

1. **–§–∞–∑–∞ –∂–∏–∑–Ω–∏**: –∫—Ä–æ–ª–∏–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ñ–∞–∑–µ `adult` (–≤–æ–∑—Ä–∞—Å—Ç –æ—Ç `youngAge` –¥–æ `adultAge`).

2. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫—É–ª–¥–∞—É–Ω** (`reproductionMinCooldown`): `clockNum` –∫—Ä–æ–ª–∏–∫–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚â• 5 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é). `clockNum` ‚Äî —Ç–∏–∫–æ–≤ —Å –º–æ–º–µ–Ω—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –∏–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏—è. –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ 0 –ø—Ä–∏ —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏–∏.

3. **–õ–∏–º–∏—Ç —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏–π**: `reproductionCount < maxReproductions` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **5**). –ö–∞–∂–¥—ã–π –∫—Ä–æ–ª–∏–∫ –º–æ–∂–µ—Ç —Ä–∞–∑–º–Ω–æ–∂–∏—Ç—å—Å—è –º–∞–∫—Å–∏–º—É–º 5 —Ä–∞–∑ –∑–∞ –≤—Å—é –∂–∏–∑–Ω—å.

4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —Å–æ—Å–µ–¥—è–º**: –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–æ–ª–∏–∫–æ–≤ –≤ —Ä–∞–¥–∏—É—Å–µ `neighborReproductionRadius` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **4**) –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é –ß–µ–±—ã—à—ë–≤–∞, **–Ω–µ —Å—á–∏—Ç–∞—è —Å–∞–º–æ–≥–æ –∫—Ä–æ–ª–∏–∫–∞**. –ï—Å–ª–∏ —Å–æ—Å–µ–¥–µ–π ‚â• `maxReproductionNeighbors` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **4**) ‚Üí —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏–µ **–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ**, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å = 0.

#### –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏

–ï—Å–ª–∏ –≤—Å–µ —É—Å–ª–æ–≤–∏—è (1‚Äì4) –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏—è –∑–∞ —Ç–µ–∫—É—â–∏–π —Ç–∏–∫:

```
baseProbability = reproductionProbabilityBase √ó clockNum
penalty = neighborReproductionPenalty √ó nearbyCount
probability = baseProbability √ó (1 ‚àí penalty)
```

–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- `reproductionProbabilityBase` = **0.05**
- `neighborReproductionPenalty` = **0.25**

–ü—Ä–∏–º–µ—Ä: `clockNum = 10`, 2 —Å–æ—Å–µ–¥–∞ ‚Üí `probability = 0.05 √ó 10 √ó (1 ‚àí 0.25 √ó 2) = 0.5 √ó 0.5 = 0.25` (25%).

–î–∞–ª–µ–µ: `Math.random() < probability` ‚Üí –µ—Å–ª–∏ –¥–∞ ‚Äî –ø–æ–ø—ã—Ç–∫–∞ —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏—è.

#### –†–æ–∂–¥–µ–Ω–∏–µ –ø–æ—Ç–æ–º–∫–∞

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –±—Ä–æ—Å–∫–µ:

1. –ù–∞—Ö–æ–¥–∏—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω–∞—è –∫–ª–µ—Ç–∫–∞ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ **1‚Äì2** (–ß–µ–±—ã—à—ë–≤–∞) –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è.
   - –ü–µ—Ä–µ–±–∏—Ä–∞—é—Ç—Å—è –≤—Å–µ –∫–ª–µ—Ç–∫–∏ –≤ –∫–≤–∞–¥—Ä–∞—Ç–µ 5√ó5 —Å —Ü–µ–Ω—Ç—Ä–æ–º –≤ —Ä–æ–¥–∏—Ç–µ–ª–µ (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ 1 –∏–ª–∏ 2), –≤ **—Å–ª—É—á–∞–π–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ** (Fisher-Yates shuffle).
2. –ö–ª–µ—Ç–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω–æ–π –µ—Å–ª–∏:
   - –í–Ω—É—Ç—Ä–∏ –≥—Ä–∞–Ω–∏—Ü –ø–æ–ª—è.
   - –ù–µ –Ω–∞ —Å—Ç–µ–Ω–µ.
   - –ù–µ –Ω–∞ –∂–∏–≤–æ–π –∑–º–µ–π–∫–µ.
   - –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ß–µ–±—ã—à—ë–≤–∞ > 1 –æ—Ç **–≤—Å–µ—Ö** —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫—Ä–æ–ª–∏–∫–æ–≤ (–≤–∫–ª—é—á–∞—è —É–∂–µ —Ä–æ–¥–∏–≤—à–∏—Ö—Å—è –≤ —ç—Ç–æ—Ç —Ç–∏–∫).
3. –ü–µ—Ä–≤–∞—è –Ω–∞–π–¥–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–Ω–∞—è –∫–ª–µ—Ç–∫–∞ ‚Äî –º–µ—Å—Ç–æ —Ä–æ–∂–¥–µ–Ω–∏—è.
4. –ï—Å–ª–∏ –Ω–∏ –æ–¥–Ω–∞ –∫–ª–µ—Ç–∫–∞ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç ‚Üí —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏–µ **–Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç** (–Ω–æ –ø–æ–ø—ã—Ç–∫–∞ –∑–∞—Å—á–∏—Ç–∞–Ω–∞ ‚Äî `clockNum` –≤—Å—ë —Ä–∞–≤–Ω–æ **–Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è** –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ, —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ—Å–æ—Å—Ç–æ—è–≤—à–∏–º—Å—è).

–ù–æ–≤–æ—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –∫—Ä–æ–ª–∏–∫: `{ pos, age: 0, clockNum: 0, reproductionCount: 0 }`.

#### –ü–æ—Å–ª–µ —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏—è

- `clockNum` —Ä–æ–¥–∏—Ç–µ–ª—è —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ **0**.
- `reproductionCount` —Ä–æ–¥–∏—Ç–µ–ª—è —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ **1**.

#### –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ç–∏–∫–µ

1. –î–ª—è –≤—Å–µ—Ö –∫—Ä–æ–ª–∏–∫–æ–≤: `age++`, `clockNum++`.
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫—Ä–æ–ª–∏–∫–∞: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø–æ–ø—ã—Ç–∫–∞ —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏—è ‚Üí –Ω–æ–≤—ã–µ –∫—Ä–æ–ª–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤.
3. –ù–æ–≤—ã–µ –∫—Ä–æ–ª–∏–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ `state.rabbits`.
4. –£–¥–∞–ª—è—é—Ç—Å—è –∫—Ä–æ–ª–∏–∫–∏ —Å `age >= maxAge` (—Å–º–µ—Ä—Ç—å –æ—Ç —Å—Ç–∞—Ä–æ—Å—Ç–∏).

---

## 7. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–µ–Ω

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –∏ –¥–ª–∏–Ω–∞ —Å—Ç–µ–Ω –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Ñ–æ—Ä–º—É–ª–∞–º–∏:

```
clusterCount = Math.floor(wallClusterCoeff √ó level + wallClusterBase)
wallLength   = Math.floor(wallLengthCoeff √ó difficultyLevel + wallLengthBase)
```

–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `wallClusterCoeff = 1.2`, `wallClusterBase = 2`, `wallLengthCoeff = 1.2`, `wallLengthBase = 3`.

–ü—Ä–∏–º–µ—Ä: —É—Ä–æ–≤–µ–Ω—å 3, —Å–ª–æ–∂–Ω–æ—Å—Ç—å 5 ‚Üí –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ = `Math.floor(1.2 √ó 3 + 2) = 5`, –¥–ª–∏–Ω–∞ = `Math.floor(1.2 √ó 5 + 3) = 9`.

### –ê–ª–≥–æ—Ä–∏—Ç–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (Random Walk + –≤–µ—Ç–≤–ª–µ–Ω–∏—è)

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞:

1. –í—ã–±–∏—Ä–∞–µ—Ç—Å—è **—Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç–∞—Ä—Ç–æ–≤–∞—è —Ç–æ—á–∫–∞** –≤–Ω—É—Ç—Ä–∏ –ø–æ–ª—è (–º–∏–Ω–∏–º—É–º 2 –∫–ª–µ—Ç–∫–∏ –æ—Ç –∫—Ä–∞—è).
2. –û—Ç —Å—Ç–∞—Ä—Ç–æ–≤–æ–π —Ç–æ—á–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **—Å–ª—É—á–∞–π–Ω–æ–µ –±–ª—É–∂–¥–∞–Ω–∏–µ** (random walk): –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ —Å–ª—É—á–∞–π–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –æ–¥–Ω–æ –∏–∑ 4 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (–≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑/–≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ).
3. –° –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é **30%** –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è **–æ—Ç–≤–µ—Ç–≤–ª–µ–Ω–∏–µ** ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–µ–Ω–∞ –≤ —Å–ª—É—á–∞–π–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—Ç —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏.
4. –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π —Å–µ–≥–º–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:
   - –û–Ω –Ω–µ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –ø–æ–ª—è (–Ω–µ –º–µ–Ω–µ–µ 1 –∫–ª–µ—Ç–∫–∏ –æ—Ç –≥—Ä–∞–Ω–∏—Ü—ã).
   - –û–Ω –Ω–µ –≤ **–∑–æ–Ω–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏–π –∑–º–µ–µ–∫.
5. –ï—Å–ª–∏ –Ω–µ—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π ‚Äî –∫–ª–∞—Å—Ç–µ—Ä –æ–±—Ä—ã–≤–∞–µ—Ç—Å—è.

### –ó–æ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∑–º–µ–µ–∫

–°—Ç–µ–Ω—ã –Ω–µ –º–æ–≥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ä—è–¥–æ–º —Å–æ —Å—Ç–∞—Ä—Ç–æ–≤—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏ –∑–º–µ–µ–∫.

**–†–∞–¥–∏—É—Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: `Math.ceil(1.5 √ó initialSnakeLength)` –∫–ª–µ—Ç–æ–∫ (–ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é –ß–µ–±—ã—à—ë–≤–∞).

–ü—Ä–∏ `initialSnakeLength = 5` ‚Üí —Ä–∞–¥–∏—É—Å = **8 –∫–ª–µ—Ç–æ–∫**. –°—Ç–µ–Ω—ã –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –±–ª–∏–∂–µ 8 –∫–ª–µ—Ç–æ–∫ (–ø–æ –ß–µ–±—ã—à—ë–≤—É) –∫ –ª—é–±–æ–º—É —Å–µ–≥–º–µ–Ω—Ç—É —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ —Ç–µ–ª–∞ –ª—é–±–æ–π –∑–º–µ–π–∫–∏.

–°—Ç–∞—Ä—Ç–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–º–µ–µ–∫ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è **–¥–æ** –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç–µ–Ω. –ó–æ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–æ—è—Ç—Å—è –ø–æ **–≤—Å–µ–º** –∫–ª–µ—Ç–∫–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∑–∞–Ω—è—Ç—ã —Ç–µ–ª–∞–º–∏ –∑–º–µ–µ–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–µ–Ω (BFS-—Å–≤—è–∑–Ω–æ—Å—Ç—å)

–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–≤—è–∑–Ω–æ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞:

1. –ù–∞—Ö–æ–¥–∏—Ç—Å—è **–ª—é–±–∞—è** —Å–≤–æ–±–æ–¥–Ω–∞—è –∫–ª–µ—Ç–∫–∞ –Ω–∞ –ø–æ–ª–µ.
2. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **BFS** (–ø–æ–∏—Å–∫ –≤ —à–∏—Ä–∏–Ω—É) –ø–æ —Å–≤–æ–±–æ–¥–Ω—ã–º –∫–ª–µ—Ç–∫–∞–º (4 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑/–≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ).
3. –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç–∏–∂–∏–º—ã—Ö –∫–ª–µ—Ç–æ–∫.
4. –ï—Å–ª–∏ `visited.size === totalFree` (–≥–¥–µ `totalFree = width √ó height ‚àí wallCount`) ‚Üí —Å—Ç–µ–Ω—ã **–≤–∞–ª–∏–¥–Ω—ã**.
5. –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí —Å—Ç–µ–Ω—ã **–Ω–µ–≤–∞–ª–∏–¥–Ω—ã** (–µ—Å—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã), –Ω—É–∂–Ω–∞ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è.

**–ü—Ä–∞–≤–∏–ª–æ**: —Å—Ç–µ–Ω—ã –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç. –í—Å–µ —Å–≤–æ–±–æ–¥–Ω—ã–µ –∫–ª–µ—Ç–∫–∏ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–≤—è–∑–∞–Ω—ã (–¥–æ—Å—Ç–∏–∂–∏–º—ã –¥—Ä—É–≥ –∏–∑ –¥—Ä—É–≥–∞).

### –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è

- –ï—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –ø—Ä–æ—à–ª–∞ ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤—ã–π –Ω–∞–±–æ—Ä —Å—Ç–µ–Ω.
- –ú–∞–∫—Å–∏–º—É–º **50 –ø–æ–ø—ã—Ç–æ–∫**.
- –ï—Å–ª–∏ –∑–∞ 50 –ø–æ–ø—ã—Ç–æ–∫ –Ω–µ —É–¥–∞–ª–æ—Å—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–Ω—ã–µ —Å—Ç–µ–Ω—ã ‚Üí –ø–æ–ª–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è **–±–µ–∑ —Å—Ç–µ–Ω** (fallback).

### Per-level overrides (dev mode)

–í dev-—Ä–µ–∂–∏–º–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è `wallClusters` –∏ `wallLength`, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–æ —Ñ–æ—Ä–º—É–ª.

### –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–µ–Ω

- –ö–∞–∂–¥–∞—è —Å—Ç–µ–Ω–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –æ–¥–Ω—É –∫–ª–µ—Ç–∫—É.
- –ó–∞–ª–∏–≤–∫–∞: `colorWall` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `#CCCCCC` ‚Äî —Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π).
- –ë–µ–∑ –æ–±–≤–æ–¥–∫–∏.
## 8. –ü–æ–±–µ–¥–∞, —É—Ä–æ–≤–Ω–∏, —Å—á—ë—Ç

### –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–ò–≥—Ä–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ **—É—Ä–æ–≤–Ω–µ–π** (level). –ù–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ:
1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤–æ–µ –ø–æ–ª–µ (—Å—Ç–µ–Ω—ã, –∫—Ä–æ–ª–∏–∫–∏, —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏).
2. –û—á–∫–∏ (`score`) –∏ –ø–æ–±–µ–¥—ã (`levelsWon`) **–ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è** –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏.
3. –¢–∏–∫ —É—Ä–æ–≤–Ω—è (`tickCount`) –∏ —Ç–∞–π–º–µ—Ä (`levelTimeLeft`) ‚Äî **–æ–±–Ω—É–ª—è—é—Ç—Å—è**.

### –û–¥–∏–Ω–æ—á–Ω–∞—è –∏–≥—Ä–∞ (1 –∑–º–µ–π–∫–∞)

#### –¶–µ–ª—å —É—Ä–æ–≤–Ω—è

–§–æ—Ä–º—É–ª–∞ —Ü–µ–ª–∏ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è:

```
targetScore(level) = Math.floor(targetScoreCoeff √ó level + targetScoreBase)
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `targetScoreCoeff = 5`, `targetScoreBase = 20`.

**–ö—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è —Ü–µ–ª—å** ‚Äî —Å—É–º–º–∞ —Ü–µ–ª–µ–π –≤—Å–µ—Ö –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π:

```
cumulativeTarget(level) = Œ£ targetScore(l) –¥–ª—è l = 1..level
```

–ü—Ä–∏–º–µ—Ä—ã (–ø—Ä–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞—Ö):
- –£—Ä–æ–≤–µ–Ω—å 1: —Ü–µ–ª—å = 25, –∫—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è = 25
- –£—Ä–æ–≤–µ–Ω—å 2: —Ü–µ–ª—å = 30, –∫—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è = 55
- –£—Ä–æ–≤–µ–Ω—å 3: —Ü–µ–ª—å = 35, –∫—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è = 90

#### –£—Å–ª–æ–≤–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è

| –£—Å–ª–æ–≤–∏–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|---------|-----------|
| `snake.score >= cumulativeTarget(level)` | **–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω** ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É |
| `snake.alive === false` | **–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞** (game over) |

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏:
1. –ò–≥—Ä–∞ **–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è** (game loop —Å—Ç–æ–∏—Ç).
2. –ü–æ—è–≤–ª—è–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ¬´–£—Ä–æ–≤–µ–Ω—å N –∑–∞–≤–µ—Ä—à—ë–Ω¬ª —Å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.
3. –ò–≥—Ä–æ–∫ –Ω–∞–∂–∏–º–∞–µ—Ç ¬´–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å¬ª (–∏–ª–∏ Space) ‚Üí –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å.

### –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏–≥—Ä–∞ (‚â•2 –∑–º–µ–µ–∫)

#### –£—Å–ª–æ–≤–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è

| –£—Å–ª–æ–≤–∏–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|---------|-----------|
| –û—Å—Ç–∞–ª–∞—Å—å **1 –∂–∏–≤–∞—è** –∑–º–µ–π–∫–∞ | –û–Ω–∞ ‚Äî **–ø–æ–±–µ–¥–∏—Ç–µ–ª—å** —É—Ä–æ–≤–Ω—è, –ø–æ–ª—É—á–∞–µ—Ç `levelsWon++` |
| **–í—Å–µ –ø–æ–≥–∏–±–ª–∏** | **–ù–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è** (0 –ø–æ–±–µ–¥) |
| –¢–∞–π–º–µ—Ä –∏—Å—Ç—ë–∫ (**3 –º–∏–Ω—É—Ç—ã**), ‚â•2 –∂–∏–≤—ã—Ö | **–ù–∏—á—å—è** (–Ω–∏–∫—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–±–µ–¥) |

#### –¢–∞–π–º–µ—Ä —É—Ä–æ–≤–Ω—è

- –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —É—Ä–æ–≤–Ω—è: `levelTimeLeft = levelTimeLimit` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **180** —Å–µ–∫—É–Ω–¥ = 3 –º–∏–Ω—É—Ç—ã).
- –ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É: `levelTimeLeft--`.
- –ü—Ä–∏ `levelTimeLeft <= 0` ‚Üí —É—Ä–æ–≤–µ–Ω—å –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è.
- –í–æ –≤—Ä–µ–º—è –ø–∞—É–∑—ã —Ç–∞–π–º–µ—Ä **–Ω–µ –∏–¥—ë—Ç**.

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è

–ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π (–∏–ª–∏ –ø—Ä–∏ game over) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏—Ç–æ–≥–æ–≤—ã–π –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:

1. **–ë–æ–ª—å—à–µ –ø–æ–±–µ–¥** (`levelsWon`) ‚Üí –ø–æ–±–µ–¥–∏—Ç–µ–ª—å.
2. –ï—Å–ª–∏ –ø–æ–±–µ–¥ **–ø–æ—Ä–æ–≤–Ω—É** ‚Üí —É –∫–æ–≥–æ **–±–æ–ª—å—à–µ –æ—á–∫–æ–≤** (`score`) ‚Üí –ø–æ–±–µ–¥–∏—Ç–µ–ª—å.
3. –ï—Å–ª–∏ –∏ –ø–æ–±–µ–¥, –∏ –æ—á–∫–æ–≤ –ø–æ—Ä–æ–≤–Ω—É ‚Üí **–Ω–∏—á—å—è** (–Ω–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è).

### –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏

–ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å:
- `level++`
- `score`, `levelsWon` ‚Äî **—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è.
- `tickCount = 0`, `levelTimeLeft = levelTimeLimit`.
- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–æ–≤—ã–µ —Å—Ç–µ–Ω—ã, –∫—Ä–æ–ª–∏–∫–∏, —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏.
- –í—Å–µ –∑–º–µ–π–∫–∏ **–æ–∂–∏–≤–∞—é—Ç** (`alive = true`, `deathReason` –æ—á–∏—â–∞–µ—Ç—Å—è).
- –î–ª–∏–Ω–∞ –∑–º–µ–µ–∫ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –¥–æ `initialSnakeLength`.
- `ticksWithoutFood = 0`.

---

## 9. –ë–æ—Ç—ã (AI)

### –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

–ë–æ—Ç—ã ‚Äî –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –∑–º–µ–π–∫–∏, —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º. –ö–∞–∂–¥—ã–π —Ç–∏–∫ –±–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∏–¥–∏–º—É—é –æ–±–ª–∞—Å—Ç—å –≤–æ–∫—Ä—É–≥ –≥–æ–ª–æ–≤—ã –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–¥–Ω–æ –∏–∑ —Ç—Ä—ë—Ö –¥–µ–π—Å—Ç–≤–∏–π: –ø–æ–≤–µ—Ä–Ω—É—Ç—å –≤–ª–µ–≤–æ, –ø–æ–≤–µ—Ä–Ω—É—Ç—å –≤–ø—Ä–∞–≤–æ –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—Ä—è–º–æ.

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ—à–µ–Ω–∏—è

```typescript
type BotDecision = 'left' | 'right' | 'front';

interface BotInput {
  vision: number[][];        // –º–∞—Ç—Ä–∏—Ü–∞ visionSize √ó visionSize
  snakeLength: number;       // —Ç–µ–∫—É—â–∞—è –¥–ª–∏–Ω–∞ –∑–º–µ–π–∫–∏
  ticksWithoutFood: number;  // —Ç–∏–∫–æ–≤ –±–µ–∑ –µ–¥—ã
}

function botDecide(input: BotInput): BotDecision;
```

–†–µ—à–µ–Ω–∏–µ `BotDecision` ‚Äî –ø–æ–≤–æ—Ä–æ—Ç **–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è** –∑–º–µ–π–∫–∏:
- `'front'` ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ —Ç–µ–∫—É—â–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏.
- `'left'` ‚Äî –ø–æ–≤–µ—Ä–Ω—É—Ç—å –Ω–∞–ª–µ–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∑–º–µ–π–∫–∞ —à–ª–∞ –≤–ø—Ä–∞–≤–æ ‚Üí –ø–æ–π–¥—ë—Ç –≤–≤–µ—Ä—Ö).
- `'right'` ‚Äî –ø–æ–≤–µ—Ä–Ω—É—Ç—å –Ω–∞–ø—Ä–∞–≤–æ.

–ó–∞—Ç–µ–º —Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π `Direction` (`up/down/left/right`).

### –ú–∞—Ç—Ä–∏—Ü–∞ vision

#### –†–∞–∑–º–µ—Ä

–ö–≤–∞–¥—Ä–∞—Ç–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ `visionSize √ó visionSize` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **20√ó20**).

#### –û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è

–ú–∞—Ç—Ä–∏—Ü–∞ **–ø–æ–≤—ë—Ä–Ω—É—Ç–∞** –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–º–µ–π–∫–∏ —Ç–∞–∫, —á—Ç–æ:
- **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–º–µ–π–∫–∏** –≤—Å–µ–≥–¥–∞ —Å–º–æ—Ç—Ä–∏—Ç ¬´–≤–≤–µ—Ä—Ö¬ª (–∫ row 0).
- –ì–æ–ª–æ–≤–∞ –∑–º–µ–π–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ **—Ü–µ–Ω—Ç—Ä–µ** –º–∞—Ç—Ä–∏—Ü—ã (`visionSize/2, visionSize/2`).

–£—Ç–∏–ª–∏—Ç–∞ `rotateToWorld` –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–∞—Ç—Ä–∏—Ü—ã –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–∏—Ä–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.

#### –ó–Ω–∞—á–µ–Ω–∏—è —è—á–µ–µ–∫

–Ø—á–µ–π–∫–∏ –º–∞—Ç—Ä–∏—Ü—ã —Å–æ–¥–µ—Ä–∂–∞—Ç **—Å—É–º–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã** –æ—Ç –≤—Å–µ—Ö –±–ª–∏–∂–∞–π—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤:

**–°–∏–≥–Ω–∞–ª—ã –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π** (—Å—Ç–µ–Ω—ã, –≥—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—è, —Ç–µ–ª–∞ –∑–º–µ–µ–∫) ‚Äî **–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ**:

| –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–ß–µ–±—ã—à—ë–≤) | –°–∏–≥–Ω–∞–ª |
|---|---|
| 1 –∫–ª–µ—Ç–∫–∞ | `obstacleSignalClose` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **‚àí100**) |
| 2 –∫–ª–µ—Ç–∫–∏ | ‚àí80 |
| 3 –∫–ª–µ—Ç–∫–∏ | ‚àí60 |
| d –∫–ª–µ—Ç–æ–∫ | `obstacleSignalClose + obstacleSignalDecay √ó (d ‚àí 1)` |

–ó–∞—Ç—É—Ö–∞–Ω–∏–µ: `obstacleSignalDecay = 20` –∑–∞ –∫–∞–∂–¥—É—é –∫–ª–µ—Ç–∫—É —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è. –°–∏–≥–Ω–∞–ª—ã –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π **—Å—É–º–º–∏—Ä—É—é—Ç—Å—è**.

**–°–∏–≥–Ω–∞–ª—ã –∫—Ä–æ–ª–∏–∫–æ–≤** ‚Äî **–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ**:

| –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–ß–µ–±—ã—à—ë–≤) | –°–∏–≥–Ω–∞–ª |
|---|---|
| 1 –∫–ª–µ—Ç–∫–∞ | `rabbitSignalClose` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **+100**) |
| 2 –∫–ª–µ—Ç–∫–∏ | +80 |
| d –∫–ª–µ—Ç–æ–∫ | `max(rabbitSignalClose ‚àí rabbitSignalDecay √ó (d ‚àí 1), rabbitSignalMin)` |
| –ú–∏–Ω–∏–º—É–º | `rabbitSignalMin` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **+5**), –Ω–∞ –ª—é–±–æ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ |

### –≠–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º

–ë–æ—Ç –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç—Ä–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ö–æ–¥–∞ (left, front, right) –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–∏–π:

1. **–ó–∞–ø—Ä–µ—Ç –∑–∞–≤–µ–¥–æ–º–æ–π —Å–º–µ—Ä—Ç–∏**: –µ—Å–ª–∏ —Ö–æ–¥ –≤–µ–¥—ë—Ç –∫ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π –≥–∏–±–µ–ª–∏ (—Å—Ç–µ–Ω–∞, –∑–º–µ–π–∫–∞ –≤ –∫–ª–µ—Ç–∫–µ –≤–ø–µ—Ä–µ–¥–∏) ‚Üí –æ—Ü–µ–Ω–∫–∞ = `‚àíInfinity`.
2. **Flood-fill –æ—Ü–µ–Ω–∫–∞**: –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≥–∏–ø–æ—Ç–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ö–æ–¥–∞ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–ª–µ—Ç–æ–∫ (anti-—Ç—É–ø–∏–∫). –•–æ–¥, –≤–µ–¥—É—â–∏–π –≤ –æ–±–ª–∞—Å—Ç—å —Å –º–∞–ª—ã–º —á–∏—Å–ª–æ–º —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∫–ª–µ—Ç–æ–∫, —à—Ç—Ä–∞—Ñ—É–µ—Ç—Å—è.
3. **–ü—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –∫ –∫—Ä–æ–ª–∏–∫–∞–º**: —Å—É–º–º–∏—Ä—É—é—Ç—Å—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Ö–æ–¥–∞.
4. **–®—Ç—Ä–∞—Ñ –∑–∞ —Å—Ç–µ–Ω—ã/—Ç–µ–ª–∞**: —Å—É–º–º–∏—Ä—É—é—Ç—Å—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã.
5. **–£—á—ë—Ç –¥–ª–∏–Ω—ã**: –µ—Å–ª–∏ –∑–º–µ–π–∫–∞ –∫–æ—Ä–æ—Ç–∫–∞—è (–±–ª–∏–∑–∫–∞ –∫ –≥–æ–ª–æ–¥—É) ‚Üí —É—Å–∏–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –∫ –∫—Ä–æ–ª–∏–∫–∞–º.

–í—ã–±–∏—Ä–∞–µ—Ç—Å—è —Ö–æ–¥ —Å –Ω–∞–∏–±–æ–ª—å—à–µ–π –∏—Ç–æ–≥–æ–≤–æ–π –æ—Ü–µ–Ω–∫–æ–π.
## 10. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —ç–∫—Ä–∞–Ω—ã

–í–µ—Å—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ **—Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**. –°—Ç–∏–ª–∏ ‚Äî —á–µ—Ä–µ–∑ CSS-–∫–ª–∞—Å—Å—ã –∏ CSS custom properties (–Ω–∏–∫–∞–∫–∏—Ö inline-—Å—Ç–∏–ª–µ–π).

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤: **–ú–µ–Ω—é**, **–ò–≥—Ä–∞**, **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã**. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç–æ–π JS-—Ä–æ—É—Ç–µ—Ä (–ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ `#app`).

---

### 10.1 –≠–∫—Ä–∞–Ω ¬´–ú–µ–Ω—é¬ª

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∏–∑ —ç–∫—Ä–∞–Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

#### –°–æ–¥–µ—Ä–∂–∏–º–æ–µ

1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫**: `üêç –ó–º–µ–π–∫–∞ –µ—Å—Ç –∫—Ä–æ–ª–∏–∫–æ–≤ üêá`
2. **–ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫** (–≤–∏–∑—É–∞–ª—å–Ω–æ –≤—ã–¥–µ–ª–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞), —Å–æ–¥–µ—Ä–∂–∞—â–∞—è:

| –ü–æ–ª–µ | –¢–∏–ø | –î–∏–∞–ø–∞–∑–æ–Ω | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------|-----|----------|----------------------|
| –ò–≥—Ä–æ–∫–∏ (0‚Äì2) | `<input type="number">` | 0‚Äì2 | 1 |
| –ë–æ—Ç—ã (0‚Äì4) | `<input type="number">` | 0‚Äì4 | 0 |
| –ò–º—è –∏–≥—Ä–æ–∫–∞ 1 | `<input type="text">` + –∫–Ω–æ–ø–∫–∞ ‚ñº | ‚Äî | `–ò–≥—Ä–æ–∫ 1` |
| –ò–º—è –∏–≥—Ä–æ–∫–∞ 2 | `<input type="text">` + –∫–Ω–æ–ø–∫–∞ ‚ñº | ‚Äî | `–ò–≥—Ä–æ–∫ 2` |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å (1‚Äì10) | `<input type="number">` | 1‚Äì10 | 1 |

3. **–ö–Ω–æ–ø–∫–∞ ¬´–°–¢–ê–†–¢¬ª** ‚Äî –ø–æ —Ü–µ–Ω—Ç—Ä—É, –Ω–∞—á–∏–Ω–∞–µ—Ç –∏–≥—Ä—É.
4. **–ö–Ω–æ–ø–∫–∞ ¬´üõ† –†–µ–∂–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏¬ª** ‚Äî –ø–æ—è–≤–ª—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –≤ dev-—Å–±–æ—Ä–∫–µ** (`__DEV_MODE__ === true`). –ó–∞–ø—É—Å–∫–∞–µ—Ç –∏–≥—Ä—É —Å dev-–ø–∞–Ω–µ–ª—å—é.

#### –í—ë—Ä—Å—Ç–∫–∞ –º–µ–Ω—é

- –§–æ—Ä–º–∞ ‚Äî grid-—Ä–∞—Å–∫–ª–∞–¥–∫–∞ –≤ 2 —Å—Ç–æ–ª–±—Ü–∞: –º–µ—Ç–∫–∏ —Å–ª–µ–≤–∞, –ø–æ–ª—è –≤–≤–æ–¥–∞ —Å–ø—Ä–∞–≤–∞.
- –ü–æ–ª—è –≤–≤–æ–¥–∞ **–≤—ã—Ä–æ–≤–Ω–µ–Ω—ã –ø–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é**.
- –ö–Ω–æ–ø–∫–∞ ¬´–°–¢–ê–†–¢¬ª ‚Äî –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, –ø–æ —Ü–µ–Ω—Ç—Ä—É.

#### Dropdown –∏–º—ë–Ω

–†—è–¥–æ–º —Å –∫–∞–∂–¥—ã–º –ø–æ–ª–µ–º ¬´–ò–º—è –∏–≥—Ä–æ–∫–∞¬ª –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ **‚ñº**. –ü—Ä–∏ –∫–ª–∏–∫–µ:
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Å —Ä–∞–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ (–∏–∑ `localStorage`).
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∏–º–µ–Ω–∏ ‚Äî –æ–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ–ª–µ.
- –ï—Å–ª–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∏–º—ë–Ω –Ω–µ—Ç ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è ¬´–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∏–º—ë–Ω¬ª.
- –ö–ª–∏–∫–Ω—É—Ç—å –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —Å–ø–∏—Å–∫–∞ ‚Äî –∑–∞–∫—Ä—ã—Ç—å –µ–≥–æ.

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ¬´–°–¢–ê–†–¢¬ª –∏–º–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `localStorage`.

#### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

- `playerCount` –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –¥–æ `[0, 2]`.
- `botCount` –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –¥–æ `[0, 4]`.
- `difficultyLevel` –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –¥–æ `[1, 10]`.

---

### 10.2 –≠–∫—Ä–∞–Ω ¬´–ò–≥—Ä–∞¬ª

#### DOM-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º)

```
#app
  .game-outer
    #game-area (.game-area, position: relative)
      .game-top-bar         ‚Üê –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å (HUD)
      .game-middle           ‚Üê flex-—Å—Ç—Ä–æ–∫–∞: –ª–µ–≤–∞—è –ø–∞–Ω–µ–ª—å + canvas + –ø—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å
        .game-side-panel (left)  ‚Üê —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ò–≥—Ä–æ–∫–∞ 1
        canvas#gameCanvas        ‚Üê –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
        .game-side-panel (right) ‚Üê —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ò–≥—Ä–æ–∫–∞ 2
      .game-bottom-panel     ‚Üê —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–æ–≤
      #modal-overlay         ‚Üê (–ø—Ä–∏ –ø–∞—É–∑–µ/–∫–æ–Ω—Ü–µ —É—Ä–æ–≤–Ω—è ‚Äî –ø–æ–≤–µ—Ä—Ö game-area)
```

#### DOM-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (dev-—Ä–µ–∂–∏–º)

```
#app
  .game-outer
    .game-layout-row         ‚Üê flex-—Å—Ç—Ä–æ–∫–∞: game-area + dev-–ø–∞–Ω–µ–ª—å
      #game-area (.game-area)
        .game-top-bar
        .game-middle .game-middle--dev
          .game-side-panel (left)
          canvas#gameCanvas
          .game-side-panel (right)
        .game-bottom-panel
        #modal-overlay       ‚Üê –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –¢–û–õ–¨–ö–û game-area, –Ω–µ dev-–ø–∞–Ω–µ–ª—å
      #dev-panel-container   ‚Üê –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–≤–Ω–µ game-area, –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞)
```

**–í–∞–∂–Ω–æ**: –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (–ø–∞—É–∑–∞, –∫–æ–Ω–µ—Ü —É—Ä–æ–≤–Ω—è, game over) –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤–Ω—É—Ç—Ä—å `#game-area` —Å `position: absolute`, –∞ –Ω–µ –≤ `document.body`. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ overlay –ø–æ–∫—Ä—ã–≤–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –∏–≥—Ä–æ–≤—É—é –æ–±–ª–∞—Å—Ç—å**, –Ω–æ –Ω–µ dev-–ø–∞–Ω–µ–ª—å.

#### –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å (HUD top bar)

–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –Ω–∞–¥ –∏–≥—Ä–æ–≤—ã–º –ø–æ–ª–µ–º. –°–æ–¥–µ—Ä–∂–∏—Ç:

| –≠–ª–µ–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `–£—Ä–æ–≤–µ–Ω—å: N` | –¢–µ–∫—É—â–∏–π –Ω–æ–º–µ—Ä —É—Ä–æ–≤–Ω—è |
| `–¶–µ–ª—å: X` | –ö—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è —Ü–µ–ª—å –ø–æ –∫—Ä–æ–ª–∏–∫–∞–º (–¥–ª—è –æ–¥–∏–Ω–æ—á–Ω–æ–π –∏–≥—Ä—ã) |
| `–í—Ä–µ–º—è: M:SS` | –û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è —É—Ä–æ–≤–Ω—è (–≤ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π) |
| `–¢–∏–∫: N` | –¢–µ–∫—É—â–∏–π –Ω–æ–º–µ—Ä —Ç–∏–∫–∞ |
| –ü–æ–¥—Å–∫–∞–∑–∫–∞ | `–ü—Ä–æ–±–µ–ª ‚Äî –ø–∞—É–∑–∞` (–∏–ª–∏ –º–∏–≥–∞—é—â–µ–µ `‚è∏ –ü–ê–£–ó–ê` –µ—Å–ª–∏ —Å—Ç–æ–∏—Ç –Ω–∞ –ø–∞—É–∑–µ) |

#### –õ–µ–≤–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å

–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ **—Å–ª–µ–≤–∞** –æ—Ç canvas. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É **–ò–≥—Ä–æ–∫–∞ 1** (–ø–µ—Ä–≤–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞):

```
–ò–º—è (bold)
–û—á–∫–∏: N
–î–ª–∏–Ω–∞: N
–ü–æ–±–µ–¥—ã: N
–°—Ç–∞—Ç—É—Å: –ñ–∏–≤ / [–ø—Ä–∏—á–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏]
```

–ï—Å–ª–∏ –∏–≥—Ä–æ–∫–∞ 1 –Ω–µ—Ç (0 –ª—é–¥–µ–π) ‚Äî –ø–∞–Ω–µ–ª—å –ø—É—Å—Ç–∞.

#### –ü—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å

–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ **—Å–ø—Ä–∞–≤–∞** –æ—Ç canvas. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –¥–ª—è **–ò–≥—Ä–æ–∫–∞ 2**.

#### –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å (–±–æ—Ç—ã)

–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ **–ø–æ–¥** canvas. –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä—è–¥ –∫–∞—Ä—Ç–æ—á–µ–∫ ‚Äî –ø–æ –æ–¥–Ω–æ–π –Ω–∞ –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞. –ö–∞–∂–¥–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç—É –∂–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–∏–º—è, –æ—á–∫–∏, –¥–ª–∏–Ω–∞, –ø–æ–±–µ–¥—ã, —Å—Ç–∞—Ç—É—Å).

–ï—Å–ª–∏ –±–æ—Ç–æ–≤ –Ω–µ—Ç ‚Äî –ø–∞–Ω–µ–ª—å –ø—É—Å—Ç–∞.

#### –†–∞–∑–º–µ—Ä canvas

Canvas –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –¥–æ—Å—Ç—É–ø–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ:
- `cellSize = Math.max(2, Math.min(Math.floor(maxW / boardWidth), Math.floor(maxH / boardHeight)))`
- `maxW` –∏ `maxH` –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞, –∑–∞ –≤—ã—á–µ—Ç–æ–º –±–æ–∫–æ–≤—ã—Ö –ø–∞–Ω–µ–ª–µ–π –∏ (–≤ dev-—Ä–µ–∂–∏–º–µ) —à–∏—Ä–∏–Ω—ã dev-–ø–∞–Ω–µ–ª–∏.

---

### 10.3 –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞

–í—Å–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ:
- **Overlay**: –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —á—ë—Ä–Ω—ã–π —Ñ–æ–Ω (`rgba(0,0,0,0.75)`) –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤–µ—Å—å `#game-area`.
- **–ö–æ–Ω—Ç–µ–Ω—Ç**: –±–µ–ª–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É overlay.
- **–ê–Ω–∏–º–∞—Ü–∏—è**: fade-in –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏.
- Overlay –∏–º–µ–µ—Ç `position: absolute` –≤–Ω—É—Ç—Ä–∏ `#game-area` (–Ω–µ `fixed`).

#### 10.3.1 –ú–æ–¥–∞–ª–∫–∞ ¬´–ü–∞—É–∑–∞¬ª

–ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Space –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã.

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: `‚è∏ –ü–ê–£–ó–ê`
- –ü–æ–¥—Å–∫–∞–∑–∫–∞: `–ù–∞–∂–º–∏—Ç–µ –ü—Ä–æ–±–µ–ª –∏–ª–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ`
- –ö–Ω–æ–ø–∫–∞: `‚ñ∂ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å`

–ó–∞–∫—Ä—ã—Ç–∏–µ (—Å–Ω—è—Ç–∏–µ –ø–∞—É–∑—ã):
- –ù–∞–∂–∞—Ç–∏–µ Space
- –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ ¬´–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å¬ª
- –ö–ª–∏–∫ –ø–æ overlay (–∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –∫–∞—Ä—Ç–æ—á–∫–∏)

#### 10.3.2 –ú–æ–¥–∞–ª–∫–∞ ¬´–ö–æ–Ω–µ—Ü —É—Ä–æ–≤–Ω—è¬ª

–ü–æ—è–≤–ª—è–µ—Ç—Å—è –∫–æ–≥–¥–∞ —É—Ä–æ–≤–µ–Ω—å –∑–∞–≤–µ—Ä—à—ë–Ω (–Ω–∞–±—Ä–∞–Ω–∞ —Ü–µ–ª—å –≤ –æ–¥–∏–Ω–æ—á–Ω–æ–π / –∫—Ç–æ-—Ç–æ –≤—ã–±—ã–ª –≤ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–µ).

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: `–£—Ä–æ–≤–µ–Ω—å N –∑–∞–≤–µ—Ä—à—ë–Ω`
- –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫: `–¶–µ–ª—å: X –∫—Ä–æ–ª–∏–∫–æ–≤`
- –¢–∞–±–ª–∏—Ü–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤—Å–µ—Ö –∑–º–µ–µ–∫:

| –ò–º—è | –û—á–∫–∏ | –î–ª–∏–Ω–∞ | –ü–æ–±–µ–¥—ã | –°—Ç–∞—Ç—É—Å |
|-----|------|-------|--------|--------|
| ... | ... | ... | ... | –ñ–∏–≤ / [–ø—Ä–∏—á–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏] |

- –ö–Ω–æ–ø–∫–∞: `‚ñ∂ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å`
- –ü–æ–¥—Å–∫–∞–∑–∫–∞: `–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –ü—Ä–æ–±–µ–ª`

–ó–∞–∫—Ä—ã—Ç–∏–µ: Space –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É—Ä–æ–≤–Ω—é.

–í dev-—Ä–µ–∂–∏–º–µ, –µ—Å–ª–∏ —ç—Ç–æ game over, –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞ –∫–æ–Ω—Ü–∞ —É—Ä–æ–≤–Ω—è (–±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–∞).

#### 10.3.3 –ú–æ–¥–∞–ª–∫–∞ ¬´–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞¬ª

–ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ game over (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–º–µ–π–∫–∞ –ø–æ–≥–∏–±–ª–∞ / –≤—Å–µ —É—Ä–æ–≤–Ω–∏ –ø—Ä–æ–π–¥–µ–Ω—ã).

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: `–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞` (–∫—Ä–∞—Å–Ω—ã–º)
- –¢–∞–±–ª–∏—Ü–∞ (–∫–∞–∫ –ø—Ä–∏ –∫–æ–Ω—Ü–µ —É—Ä–æ–≤–Ω—è)
- –ö–Ω–æ–ø–∫–∞: `–†–µ–∑—É–ª—å—Ç–∞—Ç—ã`
- –ü–æ–¥—Å–∫–∞–∑–∫–∞: `–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –ü—Ä–æ–±–µ–ª`

–ó–∞–∫—Ä—ã—Ç–∏–µ: Space –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

---

### 10.4 –≠–∫—Ä–∞–Ω ¬´–†–µ–∑—É–ª—å—Ç–∞—Ç—ã¬ª

–ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ game over.

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫**: `–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞`
2. **–¢–∞–±–ª–∏—Ü–∞ —Ç–µ–∫—É—â–µ–π –∏–≥—Ä—ã**:

| –ò–º—è | –û—á–∫–∏ | –ü–æ–±–µ–¥—ã | –°—Ç–∞—Ç—É—Å |
|-----|------|--------|--------|
| ... | ... | ... | –ñ–∏–≤ / [–ø—Ä–∏—á–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏] |

3. **–¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤** (–∏–∑ `localStorage`): —Ç–æ–ø-10, —Å –ø–æ–ª—è–º–∏ #, –ò–º—è, –û—á–∫–∏, –î–∞—Ç–∞.
4. **–ö–Ω–æ–ø–∫–∏**:
   - `–ó–∞–Ω–æ–≤–æ` ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å —Ç–µ–∫—É—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.
   - `–ú–µ–Ω—é` ‚Äî –≤–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é.

---

## 11. –í–∏–∑—É–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å

### –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ (CSS custom properties)

–í—Å–µ —Ü–≤–µ—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `:root` –∫–∞–∫ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤ `gameSettings` (–¥–ª—è canvas):

```css
:root {
  --color-bg: #1a1a2e;
  --color-text: #eee;
  --color-panel: #16213e;
  --color-panel-border: #0f3460;
  --color-accent: #e94560;
  --color-btn: #0f3460;
  --color-btn-hover: #e94560;
}
```

### –¶–≤–µ—Ç–∞ canvas (–∏–∑ `gameDefaults.json`)

| –≠–ª–µ–º–µ–Ω—Ç | –ö–ª—é—á | –¶–≤–µ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|---------|------|-------------------|
| –§–æ–Ω –ø–æ–ª—è | `colors.bg` | `#000000` (—á—ë—Ä–Ω—ã–π) |
| –°–µ—Ç–∫–∞ | `colors.grid` | `#CCCCCC` (—Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π) |
| –°—Ç–µ–Ω—ã | `colors.wall` | `#CCCCCC` (—Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π) |
| –ö—Ä–æ–ª–∏–∫ (–≤–∑—Ä–æ—Å–ª—ã–π) | `colors.rabbit` | `#FF0000` (–∫—Ä–∞—Å–Ω—ã–π) |
| –ö—Ä–æ–ª–∏–∫ (–º–æ–ª–æ–¥–æ–π) | `colors.rabbitYoung` | `#FF6666` (—Å–≤–µ—Ç–ª–æ-–∫—Ä–∞—Å–Ω—ã–π) |
| –ö—Ä–æ–ª–∏–∫ (—Å—Ç–∞—Ä—ã–π) | `colors.rabbitOld` | `#990000` (—Ç—ë–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π) |
| –û–±–≤–æ–¥–∫–∞ –≥–æ–ª–æ–≤—ã –∑–º–µ–π–∫–∏ | `colors.headStroke` | `#FFFFFF` (–±–µ–ª—ã–π) |
| –ó–º–µ–π–∫–∞ 1 | `colors.snakeColors[0]` | `#00FF00` (–∑–µ–ª—ë–Ω—ã–π) |
| –ó–º–µ–π–∫–∞ 2 | `colors.snakeColors[1]` | `#00CCFF` (–≥–æ–ª—É–±–æ–π) |
| –ó–º–µ–π–∫–∞ 3 | `colors.snakeColors[2]` | `#FFFF00` (–∂—ë–ª—Ç—ã–π) |
| –ó–º–µ–π–∫–∞ 4 | `colors.snakeColors[3]` | `#FF00FF` (–ø—É—Ä–ø—É—Ä–Ω—ã–π) |
| –ó–º–µ–π–∫–∞ 5 | `colors.snakeColors[4]` | `#FF8800` (–æ—Ä–∞–Ω–∂–µ–≤—ã–π) |
| –ó–º–µ–π–∫–∞ 6 | `colors.snakeColors[5]` | `#88FF88` (—Å–≤–µ—Ç–ª–æ-–∑–µ–ª—ë–Ω—ã–π) |

### –°–µ—Ç–∫–∞

- –†–∏—Å—É–µ—Ç—Å—è —Ç–æ–Ω–∫–∏–º–∏ –ª–∏–Ω–∏—è–º–∏ (`lineWidth: 0.5`) —Ü–≤–µ—Ç–∞ `colorGrid`.
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏: `x = 0, cellSize, 2√ócellSize, ‚Ä¶ , width√ócellSize`.
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏: `y = 0, cellSize, 2√ócellSize, ‚Ä¶ , height√ócellSize`.

### –ü–æ—Ä—è–¥–æ–∫ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ (–∫–∞–∂–¥—ã–π –∫–∞–¥—Ä)

1. –ó–∞–ª–∏–≤–∫–∞ —Ñ–æ–Ω–∞ (`colorBg`).
2. –†–∏—Å–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∫–∏.
3. –†–∏—Å–æ–≤–∞–Ω–∏–µ —Å—Ç–µ–Ω.
4. –†–∏—Å–æ–≤–∞–Ω–∏–µ –∫—Ä–æ–ª–∏–∫–æ–≤ (–∫—Ä—É–≥–∏).
5. –†–∏—Å–æ–≤–∞–Ω–∏–µ –∑–º–µ–µ–∫ (—Å–Ω–∞—á–∞–ª–∞ –º—ë—Ä—Ç–≤—ã–µ, –∑–∞—Ç–µ–º –∂–∏–≤—ã–µ ‚Äî –∂–∏–≤—ã–µ –ø–æ–≤–µ—Ä—Ö).

### –û–±—â–∏–π —Å—Ç–∏–ª—å UI

- –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ (—Ç—ë–º–Ω–æ-—Å–∏–Ω–∏–π —Ñ–æ–Ω, —Å–≤–µ—Ç–ª—ã–π —Ç–µ–∫—Å—Ç).
- –ü–∞–Ω–µ–ª–∏ —Å —Ç–æ–Ω–∫–æ–π —Ä–∞–º–∫–æ–π –∏ —Å–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏ (`border-radius: 6px`).
- –ö–Ω–æ–ø–∫–∏: —Å–ø–ª–æ—à–Ω–∞—è –∑–∞–ª–∏–≤–∫–∞, —Ö–æ–≤–µ—Ä-—ç—Ñ—Ñ–µ–∫—Ç, —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ.
- –®—Ä–∏—Ñ—Ç: –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Å–∏—Å—Ç–µ–º–Ω—ã–π –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ.
- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞: —Å —Ç–µ–Ω—å—é, –∞–Ω–∏–º–∞—Ü–∏–µ–π –ø–æ—è–≤–ª–µ–Ω–∏—è, –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º overlay.
## 12. –†–µ–∂–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (dev mode)

### –ê–∫—Ç–∏–≤–∞—Ü–∏—è

Dev-—Ä–µ–∂–∏–º –¥–æ—Å—Ç—É–ø–µ–Ω **—Ç–æ–ª—å–∫–æ** –ø—Ä–∏ —Å–±–æ—Ä–∫–µ —Å —Ñ–ª–∞–≥–æ–º `devmode`:

```bash
npm run dev:debug    # webpack serve --mode development --env devmode --open
```

Webpack –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `__DEV_MODE__: boolean` —á–µ—Ä–µ–∑ `DefinePlugin`. –í –æ–±—ã—á–Ω–æ–π —Å–±–æ—Ä–∫–µ (`npm start`, `npm run build`) –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–∞–≤–Ω–∞ `false`, –∏ –≤–µ—Å—å –∫–æ–¥ dev-–ø–∞–Ω–µ–ª–∏ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –±–∞–Ω–¥–ª (tree-shaking).

### –ö–Ω–æ–ø–∫–∞ –≤ –º–µ–Ω—é

–í dev-—Å–±–æ—Ä–∫–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ ¬´–ú–µ–Ω—é¬ª –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ **¬´üõ† –†–µ–∂–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏¬ª**. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–≥—Ä–∞ —Å –∞–∫—Ç–∏–≤–Ω—ã–º dev-—Ä–µ–∂–∏–º–æ–º.

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ dev-–ø–∞–Ω–µ–ª–∏

–í dev-—Ä–µ–∂–∏–º–µ –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ —Å–¥–≤–∏–Ω—É—Ç–æ **–≤–ª–µ–≤–æ**, –∞ **—Å–ø—Ä–∞–≤–∞** –æ—Ç –Ω–µ–≥–æ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫. DOM-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

```
.game-layout-row  (flex-—Å—Ç—Ä–æ–∫–∞)
  #game-area      (flex: 1, position: relative ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ, HUD, overlay)
  #dev-panel-container  (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫)
```

**–í–∞–∂–Ω–æ**: dev-–ø–∞–Ω–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è **–≤–Ω–µ** `#game-area`. –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (–ø–∞—É–∑–∞, –∫–æ–Ω–µ—Ü —É—Ä–æ–≤–Ω—è) –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤–Ω—É—Ç—Ä—å `#game-area` —Å `position: absolute`. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, overlay –ø–æ–∫—Ä—ã–≤–∞–µ—Ç **—Ç–æ–ª—å–∫–æ** –∏–≥—Ä–æ–≤—É—é –æ–±–ª–∞—Å—Ç—å, –∞ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ **–æ—Å—Ç–∞—ë—Ç—Å—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–π** –≤–æ –≤—Ä–µ–º—è –ø–∞—É–∑—ã –∏ –º–æ–¥–∞–ª–æ–∫.

### –°–æ–¥–µ—Ä–∂–∏–º–æ–µ dev-–ø–∞–Ω–µ–ª–∏

–ü–∞–Ω–µ–ª—å –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ –≤ **—Å–µ–∫—Ü–∏–∏** (—Ä–∞–∑–¥–µ–ª—ã), –∫–∞–∂–¥–∞—è —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ –Ω–∞–±–æ—Ä–æ–º —Å—Ç—Ä–æ–∫ ¬´–ú–µ—Ç–∫–∞ ‚Äî –ø–æ–ª–µ –≤–≤–æ–¥–∞¬ª. –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –ø–æ–ª—è–º —Å–∏–Ω–≥–ª—Ç–æ–Ω–∞ `gameSettings`.

#### 12.1 –°–µ–∫—Ü–∏—è ¬´–£—Ä–æ–≤–µ–Ω—å¬ª

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| –£—Ä–æ–≤–µ–Ω—å | –ù–æ–º–µ—Ä —É—Ä–æ–≤–Ω—è –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (input number, min=1) |

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–æ–º–µ—Ä–∞ —É—Ä–æ–≤–Ω—è –ø–∞–Ω–µ–ª—å –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è, –ø–æ–¥—Å—Ç–∞–≤–ª—è—è per-level overrides –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è.

#### 12.2 –°–µ–∫—Ü–∏—è ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Ä–æ–≤–Ω—è N¬ª (per-level overrides)

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| –ö–ª–∞—Å—Ç–µ—Ä–æ–≤ —Å—Ç–µ–Ω | –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `wallClusters` –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è |
| –î–ª–∏–Ω–∞ —Å—Ç–µ–Ω | –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `wallLength` |
| –ö—Ä–æ–ª–∏–∫–æ–≤ (–Ω–∞—á.) | –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫—Ä–æ–ª–∏–∫–æ–≤ |

–ï—Å–ª–∏ override –¥–ª—è —É—Ä–æ–≤–Ω—è –Ω–µ –∑–∞–¥–∞–Ω ‚Äî –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ–æ—Ä–º—É–ª (–ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ –¥–µ—Ñ–æ–ª—Ç).

#### 12.3 –°–µ–∫—Ü–∏—è ¬´–ó–º–µ–π–∫–∞¬ª

| –ü–æ–ª–µ | –ö–ª—é—á `gameSettings` |
|------|-----|
| –¢–∏–∫–∏ –≥–æ–ª–æ–¥–∞ | `hungerThreshold` |
| –ù–∞—á. –¥–ª–∏–Ω–∞ | `initialSnakeLength` |
| –ú–∏–Ω. –¥–ª–∏–Ω–∞ (—Å–º–µ—Ä—Ç—å) | `minSnakeLength` |

#### 12.4 –°–µ–∫—Ü–∏—è ¬´–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫—Ä–æ–ª–∏–∫–æ–≤¬ª

| –ü–æ–ª–µ | –ö–ª—é—á |
|------|------|
| –ú–æ–ª–æ–¥–æ—Å—Ç—å –¥–æ (—Ç–∏–∫) | `rabbitYoungAge` |
| –í–∑—Ä–æ—Å–ª—ã–π –¥–æ (—Ç–∏–∫) | `rabbitAdultAge` |
| –°–º–µ—Ä—Ç—å –Ω–∞ —Ç–∏–∫–µ | `rabbitMaxAge` |

#### 12.5 –°–µ–∫—Ü–∏—è ¬´–°–ø–∞–≤–Ω –∏ —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏–µ –∫—Ä–æ–ª–∏–∫–æ–≤¬ª

| –ü–æ–ª–µ | –ö–ª—é—á |
|------|------|
| –ú–∏–Ω. –¥–∏—Å—Ç–∞–Ω—Ü–∏—è | `rabbitMinDistance` |
| –ö—É–ª–¥–∞—É–Ω —Ä–∞–∑–º–Ω–æ–∂. | `reproductionMinCooldown` |
| –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | `reproductionProbabilityBase` (step 0.01) |
| –ú–∞–∫—Å. –ø–æ—Ç–æ–º—Å—Ç–≤–æ | `maxReproductions` |
| –†–∞–¥–∏—É—Å —Å–æ—Å–µ–¥–µ–π | `neighborReproductionRadius` |
| –ú–∞–∫—Å. —Å–æ—Å–µ–¥–µ–π | `maxReproductionNeighbors` |
| –®—Ç—Ä–∞—Ñ –∑–∞ —Å–æ—Å–µ–¥–∞ | `neighborReproductionPenalty` (step 0.05) |

#### 12.6 –°–µ–∫—Ü–∏—è ¬´–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–æ–ª–∏–∫–æ–≤ (—Ñ–æ—Ä–º—É–ª—ã)¬ª

| –ü–æ–ª–µ | –ö–ª—é—á |
|------|------|
| –ö–æ—ç—Ñ—Ñ. –Ω–∞ –∑–º–µ–π–∫—É | `rabbitCountPerSnakeCoeff` (step 0.1) |
| –ë–∞–∑–æ–≤–æ–µ –∫–æ–ª-–≤–æ | `rabbitCountBase` |

#### 12.7 –°–µ–∫—Ü–∏—è ¬´–°—Ç–µ–Ω—ã (—Ñ–æ—Ä–º—É–ª—ã)¬ª

| –ü–æ–ª–µ | –ö–ª—é—á |
|------|------|
| –ö–æ—ç—Ñ—Ñ. –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ | `wallClusterCoeff` (step 0.1) |
| –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Ç–µ—Ä—ã | `wallClusterBase` |
| –ö–æ—ç—Ñ—Ñ. –¥–ª–∏–Ω—ã | `wallLengthCoeff` (step 0.1) |
| –ë–∞–∑–æ–≤–∞—è –¥–ª–∏–Ω–∞ | `wallLengthBase` |

#### 12.8 –°–µ–∫—Ü–∏—è ¬´–û—á–∫–∏ (—Ñ–æ—Ä–º—É–ª—ã)¬ª

| –ü–æ–ª–µ | –ö–ª—é—á |
|------|------|
| –ö–æ—ç—Ñ—Ñ. —Ü–µ–ª–∏ | `targetScoreCoeff` (step 0.1) |
| –ë–∞–∑–æ–≤–∞—è —Ü–µ–ª—å | `targetScoreBase` |

#### 12.9 –°–µ–∫—Ü–∏—è ¬´–ü–æ–ª–µ¬ª

| –ü–æ–ª–µ | –ö–ª—é—á |
|------|------|
| –®–∏—Ä–∏–Ω–∞ | `baseWidth` |
| –í—ã—Å–æ—Ç–∞ | `baseHeight` |
| –†–æ—Å—Ç –∑–∞ —É—Ä–æ–≤–µ–Ω—å | `levelSizeIncrement` |
| –í—Ä–µ–º—è —É—Ä–æ–≤–Ω—è (—Å) | `levelTimeLimit` |
| –ò–Ω—Ç–µ—Ä–≤–∞–ª —Ç–∏–∫–∞ (–º—Å) | `tickIntervalMs` |

#### 12.10 –°–µ–∫—Ü–∏—è ¬´–ò–ò / –ó—Ä–µ–Ω–∏–µ¬ª

| –ü–æ–ª–µ | –ö–ª—é—á |
|------|------|
| –†–∞–∑–º–µ—Ä –æ–±–∑–æ—Ä–∞ | `visionSize` |
| –°–∏–≥–Ω–∞–ª –ø—Ä–µ–ø. (–±–ª–∏–∑–∫–æ) | `obstacleSignalClose` |
| –ó–∞—Ç—É—Ö–∞–Ω–∏–µ –ø—Ä–µ–ø. | `obstacleSignalDecay` |
| –°–∏–≥–Ω–∞–ª –∫—Ä–æ–ª–∏–∫–∞ (–±–ª–∏–∑–∫–æ) | `rabbitSignalClose` |
| –ó–∞—Ç—É—Ö–∞–Ω–∏–µ –∫—Ä–æ–ª–∏–∫–∞ | `rabbitSignalDecay` |
| –ú–∏–Ω. —Å–∏–≥–Ω–∞–ª –∫—Ä–æ–ª–∏–∫–∞ | `rabbitSignalMin` |

#### 12.11 –°–µ–∫—Ü–∏—è ¬´–¶–≤–µ—Ç–∞¬ª

| –ü–æ–ª–µ | –ö–ª—é—á |
|------|------|
| –§–æ–Ω | `colorBg` |
| –°–µ—Ç–∫–∞ | `colorGrid` |
| –°—Ç–µ–Ω—ã | `colorWall` |
| –í–∑—Ä–æ—Å–ª—ã–π –∫—Ä–æ–ª–∏–∫ | `colorRabbit` |
| –ú–æ–ª–æ–¥–æ–π –∫—Ä–æ–ª–∏–∫ | `colorRabbitYoung` |
| –ü–æ–∂–∏–ª–æ–π –∫—Ä–æ–ª–∏–∫ | `colorRabbitOld` |
| –û–±–≤–æ–¥–∫–∞ –≥–æ–ª–æ–≤—ã | `colorHeadStroke` |
| –ó–º–µ–π–∫–∞ 1..6 | `snakeColors[0..5]` |

–í—Å–µ —Ü–≤–µ—Ç–∞ ‚Äî `<input type="color">`.

### –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

| –ö–Ω–æ–ø–∫–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|--------|----------|
| **‚ñ∂ –ü—Ä–∏–º–µ–Ω–∏—Ç—å** | –°—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ø–æ–ª–µ–π ‚Üí –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ `gameSettings` ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç per-level overrides ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `localStorage` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ |
| **üíæ –°–æ—Ö—Ä. —É—Ä.** | –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ ¬´–ü—Ä–∏–º–µ–Ω–∏—Ç—å¬ª, –Ω–æ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–µ per-level overrides. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç toast ¬´–£—Ä–æ–≤–µ–Ω—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω ‚úì¬ª |
| **üì• JSON** | –°—á–∏—Ç—ã–≤–∞–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Üí —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π JSON (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `gameDefaults.json`) ‚Üí —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª `gameDefaults.json` —á–µ—Ä–µ–∑ blob URL |
| **üîÑ –°–±—Ä–æ—Å** | –í—ã–∑—ã–≤–∞–µ—Ç `resetSettings()` ‚Üí –æ—á–∏—â–∞–µ—Ç `localStorage` ‚Üí –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –ø–∞–Ω–µ–ª—å —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ |

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

- –ü—Ä–∏ –∫–∞–∂–¥–æ–º ¬´–ü—Ä–∏–º–µ–Ω–∏—Ç—å¬ª / ¬´–°–æ—Ö—Ä. —É—Ä.¬ª —Ç–µ–∫—É—â–∏–µ `gameSettings` (–≤–∫–ª—é—á–∞—è per-level overrides) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `localStorage` –ø–æ–¥ –∫–ª—é—á–æ–º `snake-dev-settings`.
- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ dev-–ø–∞–Ω–µ–ª–∏: –µ—Å–ª–∏ –≤ `localStorage` –µ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –æ–Ω–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ `gameSettings`.
- ¬´–°–±—Ä–æ—Å¬ª –æ—á–∏—â–∞–µ—Ç `localStorage` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `gameSettings` –∫ –¥–µ—Ñ–æ–ª—Ç–∞–º –∏–∑ `gameDefaults.json`.

### –≠–∫—Å–ø–æ—Ä—Ç JSON

–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–π —Ñ–∞–π–ª –∏–º–µ–µ—Ç **—Ç—É –∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É**, —á—Ç–æ –∏ `gameDefaults.json`:

```json
{
  "snake": { "hungerThreshold": 15, "minSnakeLength": 2, "initialSnakeLength": 5 },
  "rabbit": { "youngAge": 50, "adultAge": 100, "maxAge": 150, ... },
  "walls": { ... },
  "scoring": { ... },
  "board": { ... },
  "ai": { ... },
  "colors": { ... },
  "levelOverrides": { "1": { "wallClusters": 5 }, ... }
}
```

–≠—Ç–æ—Ç —Ñ–∞–π–ª –º–æ–∂–Ω–æ **–∑–∞–º–µ–Ω–∏—Ç—å** –≤–º–µ—Å—Ç–æ `src/engine/gameDefaults.json` –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä—ã –Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –æ—Å–Ω–æ–≤–µ.

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ game over –≤ dev-—Ä–µ–∂–∏–º–µ

–ü—Ä–∏ –ø—Ä–æ–∏–≥—Ä—ã—à–µ –≤ dev-—Ä–µ–∂–∏–º–µ **—ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è**. –í–º–µ—Å—Ç–æ –º–æ–¥–∞–ª–∫–∏ ¬´–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞¬ª ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞ ¬´–ö–æ–Ω–µ—Ü —É—Ä–æ–≤–Ω—è¬ª, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ç–æ–≥–æ –∂–µ —É—Ä–æ–≤–Ω—è).

---

## 13. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–í—Å–µ –∏–≥—Ä–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ **–æ–¥–Ω–æ–º** JSON-—Ñ–∞–π–ª–µ:

**`src/engine/gameDefaults.json`**

–≠—Ç–æ—Ç —Ñ–∞–π–ª ‚Äî –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π. –û–Ω:
1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ `settings.ts` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `gameSettings`.
2. –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–º–µ–Ω—ë–Ω —Ñ–∞–π–ª–æ–º, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–∑ dev-–ø–∞–Ω–µ–ª–∏.
3. –ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–¥–∞ ‚Äî —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ.

### Runtime –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`gameSettings`)

`gameSettings` ‚Äî –º—É—Ç–∞–±–µ–ª—å–Ω—ã–π —Å–∏–Ω–≥–ª—Ç–æ–Ω (–æ–±—ä–µ–∫—Ç `GameSettings`), –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–π –∏–∑ `gameDefaults.json` –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥—É–ª—è `settings.ts`.

–í—Å–µ –∏–≥—Ä–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã —á–∏—Ç–∞—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã **—Ç–æ–ª—å–∫–æ** –∏–∑ `gameSettings`, –∞ –Ω–µ –∏–∑ JSON –Ω–∞–ø—Ä—è–º—É—é.

```typescript
export const gameSettings: GameSettings = createDefaultSettings();
```

Dev-–ø–∞–Ω–µ–ª—å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å –ø–æ–ª—è `gameSettings` –≤ runtime. –§—É–Ω–∫—Ü–∏—è `resetSettings()` –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è –∏–∑ `gameDefaults.json`.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `gameDefaults.json`

```json
{
  "snake": {
    "hungerThreshold": 15,
    "minSnakeLength": 2,
    "initialSnakeLength": 5
  },
  "rabbit": {
    "youngAge": 50,
    "adultAge": 100,
    "maxAge": 150,
    "minDistance": 2,
    "reproductionMinCooldown": 5,
    "reproductionProbabilityBase": 0.05,
    "maxReproductions": 5,
    "neighborReproductionRadius": 4,
    "neighborReproductionPenalty": 0.25,
    "maxReproductionNeighbors": 4,
    "countPerSnakeCoeff": 1.5,
    "countBase": 10
  },
  "walls": {
    "clusterCoeff": 1.2,
    "clusterBase": 2,
    "lengthCoeff": 1.2,
    "lengthBase": 3
  },
  "scoring": {
    "targetScoreCoeff": 5,
    "targetScoreBase": 20
  },
  "board": {
    "baseWidth": 40,
    "baseHeight": 40,
    "levelSizeIncrement": 5,
    "levelTimeLimit": 180,
    "tickIntervalMs": 150
  },
  "ai": {
    "visionSize": 20,
    "obstacleSignalClose": -100,
    "obstacleSignalDecay": 20,
    "rabbitSignalClose": 100,
    "rabbitSignalDecay": 20,
    "rabbitSignalMin": 5
  },
  "colors": {
    "bg": "#000000",
    "grid": "#cccccc",
    "wall": "#cccccc",
    "rabbit": "#FF0000",
    "rabbitYoung": "#FF6666",
    "rabbitOld": "#990000",
    "headStroke": "#FFFFFF",
    "snakeColors": ["#00FF00", "#00CCFF", "#FFFF00", "#FF00FF", "#FF8800", "#88FF88"]
  },
  "levelOverrides": {}
}
```

### Per-level overrides

–û–±—ä–µ–∫—Ç `levelOverrides` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã **–≤–º–µ—Å—Ç–æ** —Ñ–æ—Ä–º—É–ª:

```json
"levelOverrides": {
  "3": { "wallClusters": 8, "wallLength": 12, "rabbitCount": 5 }
}
```

–ï—Å–ª–∏ –¥–ª—è —É—Ä–æ–≤–Ω—è –Ω–µ—Ç override ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Ñ–æ—Ä–º—É–ª—ã. Overrides –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–æ–ª—è: `wallClusters`, `wallLength`, `rabbitCount`.

### –í—Å–µ —Ñ–æ—Ä–º—É–ª—ã (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫)

| –§–æ—Ä–º—É–ª–∞ | –í—ã—Ä–∞–∂–µ–Ω–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ü—Ä–∏–º–µ—Ä |
|---------|-----------|----------------------|--------|
| –¶–µ–ª—å —É—Ä–æ–≤–Ω—è | `Math.floor(targetScoreCoeff √ó level + targetScoreBase)` | 5, 20 | –£—Ä–æ–≤–µ–Ω—å 1: 25, –£—Ä–æ–≤–µ–Ω—å 2: 30 |
| –ö—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è —Ü–µ–ª—å | `Œ£ targetScore(l) –¥–ª—è l=1..N` | ‚Äî | –£—Ä–æ–≤–µ–Ω—å 3: 25+30+35 = 90 |
| –ö–ª–∞—Å—Ç–µ—Ä—ã —Å—Ç–µ–Ω | `Math.floor(wallClusterCoeff √ó level + wallClusterBase)` | 1.2, 2 | –£—Ä–æ–≤–µ–Ω—å 3: 5 |
| –î–ª–∏–Ω–∞ —Å—Ç–µ–Ω | `Math.floor(wallLengthCoeff √ó difficulty + wallLengthBase)` | 1.2, 3 | –°–ª–æ–∂–Ω–æ—Å—Ç—å 5: 9 |
| –ù–∞—á–∞–ª—å–Ω—ã–µ –∫—Ä–æ–ª–∏–∫–∏ | `Math.floor(rabbitCountPerSnakeCoeff √ó snakeCount + rabbitCountBase ‚àí difficulty)` | 1.5, 10 | 1 –∑–º–µ–π–∫–∞, —Å–ª–æ–∂–Ω–æ—Å—Ç—å 1: 10 |
| –†–∞–∑–º–µ—Ä –ø–æ–ª—è | `base + (level ‚àí 1) √ó increment` | 40, 40, 5 | –£—Ä–æ–≤–µ–Ω—å 3: 50√ó50 |

---

## 14. –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª (tick-based)

### –û–±—â–∏–π –ø—Ä–∏–Ω—Ü–∏–ø

–ò–≥—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ **–¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∏–∫–∞—Ö**. –ö–∞–∂–¥—ã–π —Ç–∏–∫ = –æ–¥–∏–Ω —à–∞–≥ —Å–∏–º—É–ª—è—Ü–∏–∏. –ú–µ–∂–¥—É —Ç–∏–∫–∞–º–∏ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ—Ç (–Ω–µ—Ç –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏).

**–ò–Ω—Ç–µ—Ä–≤–∞–ª —Ç–∏–∫–∞**: `tickIntervalMs` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **150 –º—Å** ‚âà 6.67 —Ç–∏–∫–æ–≤/—Å–µ–∫).

Game loop —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ `setInterval`. –ü—Ä–∏ –ø–∞—É–∑–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª **–æ—á–∏—â–∞–µ—Ç—Å—è**, –ø—Ä–∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–Ω–æ–≤–æ.

### –¢–∞–π–º–µ—Ä —É—Ä–æ–≤–Ω—è

–û—Ç–¥–µ–ª—å–Ω—ã–π `setInterval(1000 –º—Å)` —É–º–µ–Ω—å—à–∞–µ—Ç `state.levelTimeLeft` –Ω–∞ 1 –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É. –ü—Ä–∏ –ø–∞—É–∑–µ —ç—Ç–æ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª —Ç–æ–∂–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.

### –ü–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –æ–¥–Ω–æ–º —Ç–∏–∫–µ

–ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ `processTick(state)` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å—Ç—Ä–æ–≥–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:

```
1. tickCount++

2. –î–ª—è –∫–∞–∂–¥–æ–π –∂–∏–≤–æ–π –∑–º–µ–π–∫–∏:
   a. –í—ã—á–∏—Å–ª–∏—Ç—å –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –≥–æ–ª–æ–≤—ã
   b. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å–æ —Å—Ç–µ–Ω–æ–π ‚Üí –µ—Å–ª–∏ –¥–∞: alive=false, skip
   c. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –∑–º–µ–π–∫–∞–º–∏ ‚Üí –µ—Å–ª–∏ –¥–∞: alive=false, skip
   d. –ù–∞–π—Ç–∏ –∫—Ä–æ–ª–∏–∫–∞ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ –Ω–æ–≤–æ–π –≥–æ–ª–æ–≤—ã (–¥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è)
   e. –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ (moveSnake, —Å grow=true –µ—Å–ª–∏ –µ—Å—Ç)
   f. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∞–º–æ—É–∫—É—Å ‚Üí –µ—Å–ª–∏ –¥–∞: alive=false, skip
   g. –ï—Å–ª–∏ –µ—Å—Ç –∫—Ä–æ–ª–∏–∫–∞: —É–¥–∞–ª–∏—Ç—å –∫—Ä–æ–ª–∏–∫–∞, +1 score, resetHunger

3. –î–ª—è –∫–∞–∂–¥–æ–π –∂–∏–≤–æ–π –∑–º–µ–π–∫–∏:
   h. processHunger (ticksWithoutFood++, –ø–æ—Ç–µ—Ä—è —Å–µ–≥–º–µ–Ω—Ç–∞, –≤–æ–∑–º–æ–∂–Ω–∞—è —Å–º–µ—Ä—Ç—å)

4. processRabbitReproduction:
   i.  –î–ª—è –≤—Å–µ—Ö –∫—Ä–æ–ª–∏–∫–æ–≤: age++, clockNum++
   j.  –î–ª—è adult –∫—Ä–æ–ª–∏–∫–æ–≤: –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π, –±—Ä–æ—Å–æ–∫ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏, —Å–ø–∞–≤–Ω –ø–æ—Ç–æ–º–∫–∞
   k.  –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã—Ö –∫—Ä–æ–ª–∏–∫–æ–≤
   l.  –£–¥–∞–ª–∏—Ç—å –∫—Ä–æ–ª–∏–∫–æ–≤ —Å age >= maxAge

5. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å board[][] –∏–∑ —Å—É—â–Ω–æ—Å—Ç–µ–π

6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å checkLevelComplete:
   - –û–¥–∏–Ω–æ—á–Ω–∞—è: score >= cumulativeTarget –ò–õ–ò !alive ‚Üí levelComplete = true
   - –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä: alive <= 1 –ò–õ–ò timeLeft <= 0 ‚Üí levelComplete = true
   - –ü—Ä–∏—Å–≤–æ–∏—Ç—å levelsWon –ø–æ–±–µ–¥–∏—Ç–µ–ª—é (–º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä)
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ (–≤–Ω–µ processTick)

–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç –∏–≥—Ä–æ–∫–æ–≤ –∏ –±–æ—Ç–æ–≤ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **–¥–æ** –≤—ã–∑–æ–≤–∞ `processTick`:

1. `InputHandler` —Å–æ–±–∏—Ä–∞–µ—Ç –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤–∞–ª–∏–¥–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞.
2. –î–ª—è –±–æ—Ç–æ–≤ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `getBotDirection(state, snake)` ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è vision-–º–∞—Ç—Ä–∏—Ü–∞ ‚Üí `botDecide()` ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ `Direction`.
3. `applyDirection(snake, direction)` ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∑–∞–ø—Ä–µ—Ç–∞ 180¬∞).
4. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `processTick(state)`.

### –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ (–≤–Ω–µ processTick)

–ü–æ—Å–ª–µ `processTick`:
1. `renderGame(ctx, state, cellSize)` ‚Äî –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ canvas.
2. `renderHUD(...)` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–Ω–µ–ª–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ `state.levelComplete` ‚Üí –µ—Å–ª–∏ –¥–∞, –ø–æ–∫–∞–∑ –º–æ–¥–∞–ª–∫–∏.

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —É—Ä–æ–≤–Ω—è

```
startGame(config, level)
  ‚Üí createGameState(config, level)
  ‚Üí initLevel(state, config)
    ‚Üí getStartPositions ‚Üí exclusionZones
    ‚Üí generateWalls (—Å –∑–æ–Ω–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
    ‚Üí createSnake √ó N
    ‚Üí spawnRabbits
    ‚Üí buildBoard
  ‚Üí buildGameDOM
  ‚Üí startGameLoop
    ‚Üí setInterval(processTick + render, tickIntervalMs)
    ‚Üí setInterval(timer, 1000ms)

// –ù–∞ –∫–∞–∂–¥—ã–π —Ç–∏–∫:
gameLoopTick()
  if (paused) return
  applyInputs()
  processTick(state)
  renderGame()
  renderHUD()
  if (state.levelComplete) ‚Üí handleLevelComplete()

handleLevelComplete()
  ‚Üí stopGameLoop
  ‚Üí showLevelCompleteModal / showGameOverModal
  ‚Üí –æ–∂–∏–¥–∞–Ω–∏–µ Space / –∫–Ω–æ–ø–∫–∏

continueAfterLevelEnd()
  ‚Üí –µ—Å–ª–∏ game over ‚Üí finishGame ‚Üí —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  ‚Üí –∏–Ω–∞—á–µ ‚Üí advanceToNextLevel ‚Üí startGameLoop
```

## 15 –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)

### 15.1 –¶–µ–ª–∏ –∫–∞—á–µ—Å—Ç–≤–∞

–ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:

1. **–ß–∏—Å—Ç—ã–π**: –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞, –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –º–∏–Ω–∏–º—É–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è, –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å.
2. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π**: –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–π –ø–æ–¥—Å–∏—Å—Ç–µ–º–µ –Ω–µ –¥–æ–ª–∂–Ω—ã —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø—Ä–∞–≤–æ–∫ –≤–æ –º–Ω–æ–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö.
3. **–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–π**: –∫–ª—é—á–µ–≤–∞—è –ª–æ–≥–∏–∫–∞ engine –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è unit-—Ç–µ—Å—Ç–∞–º–∏ –±–µ–∑ DOM/Canvas; —Ç–µ—Å—Ç—ã –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω—ã.
4. **–†–∞—Å—à–∏—Ä—è–µ–º—ã–π**: –Ω–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏/—Å—É—â–Ω–æ—Å—Ç–∏/—ç–∫—Ä–∞–Ω—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏/—Å–∏—Å—Ç–µ–º—ã, –∞ –Ω–µ —á–µ—Ä–µ–∑ —Ä–∞–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö.
5. **–ß–∏—Ç–∞–µ–º—ã–π**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∏–≥—Ä—ã –∏ UI (—ç–∫—Ä–∞–Ω—ã/–º–æ–¥–∞–ª–∫–∏/–ø–∞—É–∑–∞) –æ–ø–∏—Å–∞–Ω–æ —è–≤–Ω–æ –∏ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ, –±–µ–∑ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —Ñ–ª–∞–≥–æ–≤.
6. **–°–ª–∞–±–æ —Å–≤—è–∑–∞–Ω–Ω—ã–π**: –¥–æ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ (engine) –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–µ—Ä—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è (DOM, Canvas, localStorage, —Ç–∞–π–º–µ—Ä—ã).

---

### 15.2 –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (Layering)

#### Engine (–¥–æ–º–µ–Ω)

1. Engine ‚Äî —á–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏: —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ñ–æ—Ä–º—É–ª—ã, –¥–≤–∏–∂–µ–Ω–∏–µ, –∫–æ–ª–ª–∏–∑–∏–∏, —Å–ø–∞–≤–Ω, –º–µ—Ö–∞–Ω–∏–∫–∏.
2. Engine **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç**: DOM API, Canvas API, `localStorage`, `setInterval`, –ø—Ä—è–º–æ–π `Math.random()`.
3. Engine –¥–æ–ø—É—Å–∫–∞–µ—Ç —Ç–æ–ª—å–∫–æ:
   - —á—Ç–µ–Ω–∏–µ/–º—É—Ç–∞—Ü–∏—é `GameState`;
   - –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (—Å–º. 15.6);
   - —á—Ç–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ç–æ–ª—å–∫–æ –∏–∑ `gameSettings`/`EngineContext`.

#### App/UI (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

1. App/UI –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:
   - —Ä–æ—É—Ç–∏–Ω–≥ –ø–æ —ç–∫—Ä–∞–Ω–∞–º;
   - –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞;
   - –ø–æ–∫–∞–∑ –º–æ–¥–∞–ª–æ–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—É–∑–æ–π;
   - –∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫—É game loop;
   - —Ä–∞–±–æ—Ç—É —Å–æ storage (—Ä–µ–∫–æ—Ä–¥—ã, –∏–º–µ–Ω–∞, dev-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏).
2. App/UI **–Ω–µ –º—É—Ç–∏—Ä—É–µ—Ç** `GameState` –Ω–∞–ø—Ä—è–º—É—é (—Å–º. 15.4).

#### Renderer

1. Renderer —á–∏—Ç–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —Ä–∏—Å—É–µ—Ç; **–Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫–∏** —Å–∏–º—É–ª—è—Ü–∏–∏ –∏ –Ω–µ –º—É—Ç–∏—Ä—É–µ—Ç `GameState`.
2. –õ—é–±—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (–µ—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º ‚Äúvisual state‚Äù renderer-—Å–ª–æ—è –∏ **–Ω–µ –≤–ª–∏—è—é—Ç** –Ω–∞ –ø—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã.

---

### 15.3 –ü–æ—Ä—Ç—ã –∏ –∞–¥–∞–ø—Ç–µ—Ä—ã (Hexagonal / Ports & Adapters)

1. –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –æ—Ñ–æ—Ä–º–ª—è—é—Ç—Å—è –∫–∞–∫ **–ø–æ—Ä—Ç—ã (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)** –≤ Engine –∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è **–∞–¥–∞–ø—Ç–µ—Ä–∞–º–∏** –≤ App/Infra.
2. –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç: `RandomPort` (RNG).
   - –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –≤ Engine –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ctx.rng.next()`.
   - –ü—Ä—è–º–æ–π `Math.random()` –≤ –º–æ–¥—É–ª—è—Ö `engine/**` –∑–∞–ø—Ä–µ—â—ë–Ω.
3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è): `StoragePort`, `SchedulerPort`/`ClockPort`, `LoggerPort`.

---

### 15.4 –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã (Single Source of Truth) ‚Äî –≤–∞—Ä–∏–∞–Ω—Ç A

1. `GameState` ‚Äî **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã** –¥–ª—è —Ç–µ–∫—É—â–µ–π –ø–∞—Ä—Ç–∏–∏ (–ø–æ–∑–∏—Ü–∏–∏, –æ—á–∫–∏, –≤–æ–∑—Ä–∞—Å—Ç, —Å—Ç–∞—Ç—É—Å—ã –∏ —Ç.–¥.).
2. –ú—É—Ç–∞—Ü–∏—è `GameState` —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ —Ç–æ–ª—å–∫–æ:
   - –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π Engine (`initLevel`, `processTick`, —Å–∏—Å—Ç–µ–º—ã);
   - —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π use-case —Å–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä `GameController`), –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç Engine –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.
3. UI/Renderer/InputHandler **–Ω–µ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞** –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å `GameState` –Ω–∞–ø—Ä—è–º—É—é.
4. –ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (`board[][]`, occupancy-–∫—ç—à–∏ –∏ —Ç.–ø.) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º—ã–º–∏** –∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –º–∞—Å—Ç–µ—Ä-–¥–∞–Ω–Ω—ã–º–∏.

---

### 15.5 Pipeline / Systems (–∫–æ–Ω–≤–µ–π–µ—Ä —Å–∏—Å—Ç–µ–º —Ç–∏–∫–∞)

1. `processTick` —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å **—Å–∏—Å—Ç–µ–º** (pipeline), –∫–∞–∂–¥–∞—è –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–¥–Ω—É –º–µ—Ö–∞–Ω–∏–∫—É/—Ñ–∞–∑—É.
2. –°–∏—Å—Ç–µ–º–∞ –∏–º–µ–µ—Ç –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è): `run(state, ctx, out)` –∏ –Ω–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å DOM/Canvas.
3. –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—É —Ç–∏–∫–∞ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 14 –∏ –∑–∞–¥–∞—ë—Ç—Å—è —è–≤–Ω—ã–º —Å–ø–∏—Å–∫–æ–º —Å–∏—Å—Ç–µ–º.
4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑:
   - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã;
   - –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã;
   –±–µ–∑ —Ä–∞–∑—Ä–∞—Å—Ç–∞–Ω–∏—è –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.

---

### 15.6 –î–æ–º–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (Domain Events)

1. Engine –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç UI/–∑–≤—É–∫–∏/–∞–Ω–∏–º–∞—Ü–∏–∏ –Ω–∞–ø—Ä—è–º—É—é. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ Engine —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç **Domain Events** (—Å–æ–±—ã—Ç–∏—è —Ñ–∞–∫—Ç–æ–≤).
2. `processTick` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `TickResult { events: DomainEvent[] }` (–∏–ª–∏ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º), —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å–æ–±—ã—Ç–∏—è —Ç–∏–∫–∞.
3. –ü—Ä–∏–º–µ—Ä—ã –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä):
   - `SNAKE_DIED` (snakeId, reason)
   - `RABBIT_EATEN` (snakeId, pos, newScore)
   - `RABBIT_BORN` (parentPos, childPos)
   - `LEVEL_COMPLETED` (reason, winnerId?)
   - `GAME_OVER` (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
4. App-—Å–ª–æ–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç Domain Events –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã: –º–æ–¥–∞–ª–∫–∏, –∑–≤—É–∫, storage, –ø–µ—Ä–µ—Ö–æ–¥—ã —ç–∫—Ä–∞–Ω–æ–≤.

---

### 15.7 –í–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: Command Buffer + –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ —Ç–∏–∫–∞

1. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ DOM-—Å–æ–±—ã—Ç–∏–π –Ω–µ –º–µ–Ω—è—é—Ç `GameState`. –û–Ω–∏ —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –≤ –±—É—Ñ–µ—Ä (`InputBuffer`).
2. –ù–∞ –∫–∞–∂–¥–æ–º —Ç–∏–∫–µ –∫–æ–º–∞–Ω–¥—ã **–ø–æ—Ç—Ä–µ–±–ª—è—é—Ç—Å—è** –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –≤ –Ω–∞—á–∞–ª–µ —Ç–∏–∫–∞ (–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –≤–≤–æ–¥–∞ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 3 –∏ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–æ–º —Ç–∏–∫–∞ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 14).
3. –ë—É—Ñ–µ—Ä –≤–≤–æ–¥–∞ –¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ: ‚Äú–ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤–∞–ª–∏–¥–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞ —Ç–∏–∫‚Äù –∏ –∑–∞–ø—Ä–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –Ω–∞ 180¬∞.

---

### 15.8 UI/—ç–∫—Ä–∞–Ω—ã/–ø–∞—É–∑–∞: –∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç (FSM)

1. –õ–æ–≥–∏–∫–∞ —ç–∫—Ä–∞–Ω–æ–≤ –∏ –º–æ–¥–∞–ª–æ–∫ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ **Finite State Machine (FSM)**.
2. `Space` –∏ –∫–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Å–æ–±—ã—Ç–∏—è FSM; –ø–æ–≤–µ–¥–µ–Ω–∏–µ Space –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞–≤—Ç–æ–º–∞—Ç–∞ (—Ä–∞–∑–¥–µ–ª 3. –ü–∞—É–∑–∞).
3. –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ñ–ª–∞–≥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚Äúpaused=true –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –º–æ–¥–∞–ª–∫–∞ –∫–æ–Ω—Ü–∞ —É—Ä–æ–≤–Ω—è‚Äù) –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è; –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –º–æ–¥–µ–ª—å—é —Å–æ—Å—Ç–æ—è–Ω–∏–π.
4. –ü–µ—Ä–µ—Ö–æ–¥—ã (menu ‚Üí game ‚Üí results, playing ‚Üî paused, levelComplete, gameOver) –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —è–≤–Ω–æ (—Ç–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏–ª–∏ reducer-—Ñ—É–Ω–∫—Ü–∏—è).

---

### 15.9 –ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—è–≤–Ω–∞—è DI –±–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)

1. Engine –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `EngineContext` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `settings`, `rng`, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `scratch`).
2. –¢–µ—Å—Ç—ã –º–æ–≥—É—Ç –ø–æ–¥–º–µ–Ω—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (seeded RNG, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏) –±–µ–∑ –º–æ–∫–æ–≤ DOM.

---

### 15.10 Derived-–¥–∞–Ω–Ω—ã–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. `board[][]` –∏ –ª—é–±—ã–µ occupancy-–∏–Ω–¥–µ–∫—Å—ã —è–≤–ª—è—é—Ç—Å—è derived-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –∏ –º–æ–≥—É—Ç –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å—Å—è –∏–∑ –º–∞—Å—Ç–µ—Ä-–¥–∞–Ω–Ω—ã—Ö (–ø–æ –¢–ó ‚Äî –∫–∞–∂–¥—ã–π —Ç–∏–∫).
2. –ö–æ–ª–ª–∏–∑–∏–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞ —Å–∏–º—É–ª—è—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ –º–∞—Å—Ç–µ—Ä-–¥–∞–Ω–Ω—ã–µ (`snakes`, `rabbits`, `walls`) –ª–∏–±–æ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ derived-–∏–Ω–¥–µ–∫—Å—ã, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∏–∑ –º–∞—Å—Ç–µ—Ä-–¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ç–∏–∫–∞.

---

### 15.11 –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ OOP-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. –ö–ª—é—á–µ–≤—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –∫–∞–∫ –∫–ª–∞—Å—Å—ã —Å –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `SnakeEntity`, `RabbitEntity`), –∞ –Ω–µ –∫–∞–∫ –Ω–∞–±–æ—Ä —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä.
2. –§–∞–π–ª `engine/types.ts` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–∏–ø—ã/–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã TypeScript. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∞—Å—Å–æ–≤ –≤ –Ω–µ–≥–æ –Ω–µ –ø–æ–º–µ—â–∞—é—Ç—Å—è.
3. –ü—É–±–ª–∏—á–Ω—ã–π API –∫–ª–∞—Å—Å–æ–≤ –¥–æ–ª–∂–µ–Ω –≤—ã—Ä–∞–∂–∞—Ç—å –¥–æ–º–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (`move`, `applyDirection`, `die`, `tickLifecycle`), –∞ –Ω–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è.
4. –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã —Å—É—â–Ω–æ—Å—Ç–µ–π (–∑–∞–ø—Ä–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –Ω–∞ 180¬∞, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å–º–µ—Ä—Ç—å, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª–∏–Ω—ã, —Å—á—ë—Ç—á–∏–∫–æ–≤ –∏ —Ç.–ø.) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–æ–≤ –∫–ª–∞—Å—Å–æ–≤.
5. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è use-case —É—Ä–æ–≤–Ω—è (`GameController`, `SnakeGameApplication`) –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–º–µ–Ω–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π —Å—É—â–Ω–æ—Å—Ç–µ–π, –∞ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤—ã–∑–æ–≤—ã —Å–µ—Ä–≤–∏—Å–æ–≤/engine.
6. –ö–ª–∞—Å—Å—ã –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å SRP: –ø—Ä–∏ —Ä–æ—Å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤—ã–Ω–æ—Å–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã/–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã, –∞ –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º ¬´god object¬ª.
7. –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ –æ—Ç–¥–∞—ë—Ç—Å—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –Ω–∞–¥ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º; –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —è–≤–Ω–æ–π –∏ —É—Å—Ç–æ–π—á–∏–≤–æ–π –º–æ–¥–µ–ª–∏ ¬´is-a¬ª.
8. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —è–≤–Ω–æ (DI —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç/–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä); —Å–∫—Ä—ã—Ç—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–æ–≤ –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è.


## 16. –¢–µ—Å—Ç—ã (Jest)

### –û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –°—Ä–µ–¥–∞: **jsdom** (–¥–ª—è —Ç–µ—Å—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö DOM API).
- CSS-–∏–º–ø–æ—Ä—Ç—ã –º–æ–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `styleMock.js`.
- –í—Å–µ engine-—Ç–µ—Å—Ç—ã **–Ω–µ –∑–∞–≤–∏—Å—è—Ç** –æ—Ç DOM ‚Äî —Ç–µ—Å—Ç–∏—Ä—É—é—Ç —á–∏—Å—Ç—É—é –ª–æ–≥–∏–∫—É.
- –§–æ—Ä–º–∞—Ç: `describe` + `it`/`test`, —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∏–ª–∏ —Ä—É—Å—Å–∫–æ–º.
- –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ç–µ—Å—Ç–æ–º: `resetSettings()` –¥–ª—è —á–∏—Å—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–æ–≤ (–≠—Ç–∞–ø 3c)

#### 16.1 –î–≤–∏–∂–µ–Ω–∏–µ –∑–º–µ–π–∫–∏

| –¢–µ—Å—Ç | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
|------|-----------------|
| `getNextHeadPosition` –≤—ã—á–∏—Å–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–ª–µ—Ç–∫—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è | `up` ‚Üí y‚àí1, `down` ‚Üí y+1, `left` ‚Üí x‚àí1, `right` ‚Üí x+1 |
| `moveSnake(grow=false)` –¥–æ–±–∞–≤–ª—è–µ—Ç –≥–æ–ª–æ–≤—É –∏ —É–¥–∞–ª—è–µ—Ç —Ö–≤–æ—Å—Ç | –î–ª–∏–Ω–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –≥–æ–ª–æ–≤–∞ –Ω–∞ –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏ |
| `moveSnake(grow=true)` –¥–æ–±–∞–≤–ª—è–µ—Ç –≥–æ–ª–æ–≤—É, —Ö–≤–æ—Å—Ç –æ—Å—Ç–∞—ë—Ç—Å—è | –î–ª–∏–Ω–∞ += 1 |

#### 16.2 –ó–∞–ø—Ä–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –Ω–∞ 180¬∞

| –¢–µ—Å—Ç | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
|------|-----------------|
| `isReverseDirection('right', 'left')` ‚Üí `true` | –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è |
| `isReverseDirection('right', 'up')` ‚Üí `false` | –ü–æ–≤–æ—Ä–æ—Ç –Ω–∞ 90¬∞ —Ä–∞–∑—Ä–µ—à—ë–Ω |
| `applyDirection` —Å —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–º –Ω–µ –º–µ–Ω—è–µ—Ç direction | –ó–º–µ–π–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–µ–∂–Ω–µ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| `applyDirection` —Å –ø–æ–≤–æ—Ä–æ—Ç–æ–º –Ω–∞ 90¬∞ –º–µ–Ω—è–µ—Ç direction | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è |

#### 16.3 –ö–æ–ª–ª–∏–∑–∏–∏

| –¢–µ—Å—Ç | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
|------|-----------------|
| `collidesWithWall` –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã ‚Üí `true` | –ü–æ–∑–∏—Ü–∏—è `(-1, 5)` –∏–ª–∏ `(width, 0)` |
| `collidesWithWall` –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –Ω–∞ —Å—Ç–µ–Ω—É ‚Üí `true` | –ü–æ–∑–∏—Ü–∏—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —ç–ª–µ–º–µ–Ω—Ç–æ–º `state.walls` |
| `collidesWithWall` –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π –∫–ª–µ—Ç–∫–µ ‚Üí `false` | |
| `selfCollision` –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –≥–æ–ª–æ–≤—ã —Å —Å–µ–≥–º–µ–Ω—Ç–æ–º ‚Üí `true` | |
| `selfCollision` –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è ‚Üí `false` | |
| `collidesWithSnake` —Å –¥—Ä—É–≥–æ–π –∑–º–µ–π–∫–æ–π ‚Üí `true` | –ü–æ–∑–∏—Ü–∏—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å–µ–≥–º–µ–Ω—Ç–æ–º –¥—Ä—É–≥–æ–π –∂–∏–≤–æ–π –∑–º–µ–π–∫–∏ |
| `collidesWithSnake` —Å –º—ë—Ä—Ç–≤–æ–π –∑–º–µ–π–∫–æ–π ‚Üí `false` | –ú—ë—Ä—Ç–≤—ã–µ –∑–º–µ–π–∫–∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è |

#### 16.4 –ì–æ–ª–æ–¥

| –¢–µ—Å—Ç | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
|------|-----------------|
| `processHunger` –ø–æ—Å–ª–µ `hungerThreshold ‚àí 1` —Ç–∏–∫–æ–≤ –±–µ–∑ –µ–¥—ã ‚Äî –∑–º–µ–π–∫–∞ —Ü–µ–ª–∞ | `ticksWithoutFood` –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è |
| `processHunger` –Ω–∞ —Ç–∏–∫–µ `hungerThreshold` ‚Äî —Ç–µ—Ä—è–µ—Ç 1 —Å–µ–≥–º–µ–Ω—Ç | `segments.length` —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –Ω–∞ 1, `ticksWithoutFood = 0` |
| –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ—Ç–µ—Ä—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –¥–æ `minSnakeLength` ‚Üí `alive = false` | `deathReason = '–£–º–µ—Ä–ª–∞ —Å –≥–æ–ª–æ–¥—É'` |
| `resetHunger` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç `ticksWithoutFood` –≤ 0 | |

#### 16.5 –ü–æ–µ–¥–∞–Ω–∏–µ –∫—Ä–æ–ª–∏–∫–æ–≤

| –¢–µ—Å—Ç | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
|------|-----------------|
| –ó–º–µ–π–∫–∞ —Å—ä–µ–¥–∞–µ—Ç –∫—Ä–æ–ª–∏–∫–∞ ‚Üí `score += 1` | |
| –ó–º–µ–π–∫–∞ —Ä–∞—Å—Ç—ë—Ç –Ω–∞ 1 —Å–µ–≥–º–µ–Ω—Ç | `segments.length` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è |
| –ö—Ä–æ–ª–∏–∫ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ `state.rabbits` | |
| `ticksWithoutFood` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è | |

#### 16.6 `processTick` (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π)

| –¢–µ—Å—Ç | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
|------|-----------------|
| –û–¥–∏–Ω –ø–æ–ª–Ω—ã–π —Ç–∏–∫: –∑–º–µ–π–∫–∞ –¥–≤–∏–≥–∞–µ—Ç—Å—è –Ω–∞ 1 –∫–ª–µ—Ç–∫—É | –ù–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è –≥–æ–ª–æ–≤—ã, —Ö–≤–æ—Å—Ç —É–¥–∞–ª—ë–Ω |
| –¢–∏–∫ —Å–æ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ–º —Å–æ —Å—Ç–µ–Ω–æ–π ‚Üí `alive = false` | `deathReason = '–í—Ä–µ–∑–∞–ª–∞—Å—å –≤ —Å—Ç–µ–Ω—É'` |
| –¢–∏–∫ —Å –ø–æ–µ–¥–∞–Ω–∏–µ–º –∫—Ä–æ–ª–∏–∫–∞ ‚Üí —Ä–æ—Å—Ç + –æ—á–∫–∏ | |
| `tickCount` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è | |

#### 16.7 –°–ø–∞–≤–Ω –∫—Ä–æ–ª–∏–∫–æ–≤

| –¢–µ—Å—Ç | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
|------|-----------------|
| `spawnRabbits` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–æ–ª–∏–∫–æ–≤ | –ò–ª–∏ –º–µ–Ω—å—à–µ, –µ—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–µ—Å—Ç–∞ |
| –ù–∏ –æ–¥–∏–Ω –∫—Ä–æ–ª–∏–∫ –Ω–µ –Ω–∞ —Å—Ç–µ–Ω–µ | `rabbit.pos` –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `state.walls` |
| –ù–∏ –æ–¥–∏–Ω –∫—Ä–æ–ª–∏–∫ –Ω–µ –Ω–∞ –∑–º–µ–π–∫–µ | `rabbit.pos` –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ |
| –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ß–µ–±—ã—à—ë–≤–∞ –º–µ–∂–¥—É –ª—é–±—ã–º–∏ –¥–≤—É–º—è –∫—Ä–æ–ª–∏–∫–∞–º–∏ > 1 | |
| –í—Å–µ –∫—Ä–æ–ª–∏–∫–∏ –≤–Ω—É—Ç—Ä–∏ –≥—Ä–∞–Ω–∏—Ü –ø–æ–ª—è | |
| `age`, `clockNum`, `reproductionCount` = 0 | |

#### 16.8 –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–µ–Ω (BFS-—Å–≤—è–∑–Ω–æ—Å—Ç—å)

| –¢–µ—Å—Ç | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
|------|-----------------|
| `validateWalls` –¥–ª—è –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Å—Ç–µ–Ω ‚Üí `true` | |
| `validateWalls` –¥–ª—è —Å—Ç–µ–Ω, —Å–æ–∑–¥–∞—é—â–∏—Ö –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∑–æ–Ω—É ‚Üí `false` | –°—Ç–µ–Ω–∞ –æ—Ç –∫—Ä–∞—è –¥–æ –∫—Ä–∞—è |
| `generateWalls` –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–µ —Å—Ç–µ–Ω—ã (–∏–ª–∏ –ø—É—Å—Ç—ã–µ) | –í—ã–∑–≤–∞—Ç—å `validateWalls` –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
| –°—Ç–µ–Ω—ã –Ω–µ –≤ –∑–æ–Ω–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∑–º–µ–µ–∫ | –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ß–µ–±—ã—à—ë–≤–∞ –¥–æ exclusionZones > safeRadius |

#### 16.9 –§–æ—Ä–º—É–ª—ã

| –¢–µ—Å—Ç | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
|------|-----------------|
| `getTargetScore(1)` = `Math.floor(5 √ó 1 + 20)` = 25 | |
| `getCumulativeTargetScore(3)` = 25 + 30 + 35 = 90 | |
| `getWallClusterCount(3)` = `Math.floor(1.2 √ó 3 + 2)` = 5 | |
| `getWallLength(5)` = `Math.floor(1.2 √ó 5 + 3)` = 9 | |
| `getInitialRabbitCount(1, 1)` = `Math.floor(1.5 √ó 1 + 10 ‚àí 1)` = 10 | |
| –í—Å–µ —Ñ–æ—Ä–º—É–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `Math.floor` | |

#### 16.10 `checkLevelComplete`

| –¢–µ—Å—Ç | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
|------|-----------------|
| –û–¥–∏–Ω–æ—á–Ω–∞—è: `score >= cumulativeTarget` ‚Üí `true` | |
| –û–¥–∏–Ω–æ—á–Ω–∞—è: `score < cumulativeTarget` –∏ alive ‚Üí `false` | |
| –û–¥–∏–Ω–æ—á–Ω–∞—è: `alive = false` ‚Üí `true` | |
| –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä: 1 –∑–º–µ–π–∫–∞ –∂–∏–≤–∞ ‚Üí `true` | |
| –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä: `timeLeft <= 0` ‚Üí `true` | |
| –ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä: 2+ –∂–∏–≤—ã –∏ –≤—Ä–µ–º—è –µ—Å—Ç—å ‚Üí `false` | |

---

## 17. –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å

### –≠—Ç–∞–ø 1: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚úÖ

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|--------|--------|
| README.md | ‚úÖ |
| docs/rules.md | ‚úÖ |
| docs/ai.md | ‚úÖ |
| docs/spec.md (—ç—Ç–æ –¢–ó) | ‚úÖ |

**–ö–æ–º–º–∏—Ç**: `ea21b2f` docs: add project documentation

---

### –≠—Ç–∞–ø 2: –°–∫–µ–ª–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–±–æ—Ä–∫–∞ ‚úÖ

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|--------|--------|
| package.json, webpack, tsconfig, jest | ‚úÖ |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ src/ (–≤—Å–µ –º–æ–¥—É–ª–∏-—Å–∫–µ–ª–µ—Ç—ã) | ‚úÖ |
| Smoke-—Ç–µ—Å—Ç—ã (6 —à—Ç.) | ‚úÖ |
| `npm run build` ‚úì, `npm test` ‚úì | ‚úÖ |

**–ö–æ–º–º–∏—Ç**: `d5b0d63` feat: project skeleton with webpack, typescript, jest

---

### –≠—Ç–∞–ø 3a: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è 1 –∏–≥—Ä–æ–∫–∞ ‚úÖ

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|--------|--------|
| Game loop (processTick) | ‚úÖ |
| initLevel (—Å—Ç–µ–Ω—ã ‚Üí –∑–º–µ–π–∫–∏ ‚Üí –∫—Ä–æ–ª–∏–∫–∏) | ‚úÖ |
| –ó–æ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å—Ç–µ–Ω (1.5 √ó initialSnakeLength) | ‚úÖ |
| InputHandler (WASD + —Å—Ç—Ä–µ–ª–∫–∏ + Space/–ø–∞—É–∑–∞) | ‚úÖ |
| Canvas renderer (—Å–µ—Ç–∫–∞, —Å—Ç–µ–Ω—ã, –∑–º–µ–π–∫–∏, –∫—Ä–æ–ª–∏–∫–∏) | ‚úÖ |
| –ó–º–µ–π–∫–∞: —Ç—ë–º–Ω–∞—è –≥–æ–ª–æ–≤–∞, –≥–ª–∞–∑–∫–∏, –æ–±–≤–æ–¥–∫–∞ —Å–µ–≥–º–µ–Ω—Ç–æ–≤, –º—ë—Ä—Ç–≤—ã–µ —Å–µ—Ä—ã–µ | ‚úÖ |
| –ö—Ä–æ–ª–∏–∫–∏: –∫—Ä—É–∂–∫–∏, —Ä–∞–∑–º–µ—Ä/—Ü–≤–µ—Ç –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É, —Å–º–µ—Ä—Ç—å –Ω–∞ 150 —Ç–∏–∫–µ | ‚úÖ |
| –†–∞–∑–º–Ω–æ–∂–µ–Ω–∏–µ –∫—Ä–æ–ª–∏–∫–æ–≤: 50‚Äì100 —Ç–∏–∫–æ–≤, 4 —Å–æ—Å–µ–¥–∞ –≤ 4 –∫–ª–µ—Ç–∫–∞—Ö | ‚úÖ |
| HUD: P1 —Å–ª–µ–≤–∞, P2 —Å–ø—Ä–∞–≤–∞, –±–æ—Ç—ã —Å–Ω–∏–∑—É | ‚úÖ |
| –ü–∞—É–∑–∞ ‚Äî –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å overlay | ‚úÖ |
| –ö–æ–Ω–µ—Ü —É—Ä–æ–≤–Ω—è ‚Äî –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ | ‚úÖ |
| Game over ‚Äî –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ, –∑–∞—Ç–µ–º —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ | ‚úÖ |
| Space –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π: –ø–∞—É–∑–∞ / –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å / –∑–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É | ‚úÖ |
| –ö—É–º—É–ª—è—Ç–∏–≤–Ω—ã–π —Å—á—ë—Ç (—Ü–µ–ª—å = —Å—É–º–º–∞ —Ü–µ–ª–µ–π 1..N) | ‚úÖ |
| –†—É—Å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, grid-–≤—ë—Ä—Å—Ç–∫–∞ –º–µ–Ω—é, dropdown –∏–º—ë–Ω | ‚úÖ |
| CSS-–∫–ª–∞—Å—Å—ã + custom properties (–±–µ–∑ inline) | ‚úÖ |

---

### –≠—Ç–∞–ø 3b: –†–µ–∂–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (dev mode) ‚úÖ

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|--------|--------|
| –ï–¥–∏–Ω—ã–π JSON (`gameDefaults.json`) | ‚úÖ |
| Runtime settings (`gameSettings` –∏–∑ `settings.ts`) | ‚úÖ |
| webpack DefinePlugin + `npm run dev:debug` | ‚úÖ |
| Dev panel: –≤—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã, AI, —Ü–≤–µ—Ç–∞ | ‚úÖ |
| Per-level overrides (—Å—Ç–µ–Ω—ã, –∫—Ä–æ–ª–∏–∫–∏) | ‚úÖ |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage, —ç–∫—Å–ø–æ—Ä—Ç JSON | ‚úÖ |
| Overlay –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç dev-–ø–∞–Ω–µ–ª—å | ‚úÖ |
| –ü—Ä–∏ game over –≤ dev mode ‚Äî –Ω–µ—Ç —ç–∫—Ä–∞–Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ | ‚úÖ |

---

### –≠—Ç–∞–ø 3c: –¢–µ—Å—Ç—ã –¥–ª—è 1 –∏–≥—Ä–æ–∫–∞ ‚ùå –ù–µ –Ω–∞—á–∞—Ç–æ

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|--------|--------|
| –î–≤–∏–∂–µ–Ω–∏–µ –∑–º–µ–π–∫–∏ (getNextHeadPosition, moveSnake) | ‚è≥ |
| –ó–∞–ø—Ä–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –Ω–∞ 180¬∞ | ‚è≥ |
| –ö–æ–ª–ª–∏–∑–∏–∏ (—Å—Ç–µ–Ω–∞, —Å–∞–º–æ—É–∫—É—Å, –¥—Ä—É–≥–∞—è –∑–º–µ–π–∫–∞) | ‚è≥ |
| –ì–æ–ª–æ–¥ (–ø–æ—Ç–µ—Ä—è —Å–µ–≥–º–µ–Ω—Ç–∞, —Å–º–µ—Ä—Ç—å –ø—Ä–∏ –¥–ª–∏–Ω–µ < 2) | ‚è≥ |
| –ü–æ–µ–¥–∞–Ω–∏–µ –∫—Ä–æ–ª–∏–∫–æ–≤ (—Ä–æ—Å—Ç, –æ—á–∫–∏, —Å–±—Ä–æ—Å –≥–æ–ª–æ–¥–∞) | ‚è≥ |
| processTick (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç) | ‚è≥ |
| –°–ø–∞–≤–Ω –∫—Ä–æ–ª–∏–∫–æ–≤ (–¥–∏—Å—Ç–∞–Ω—Ü–∏—è, –Ω–µ –Ω–∞ —Å—Ç–µ–Ω–∞—Ö) | ‚è≥ |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–µ–Ω (BFS-—Å–≤—è–∑–Ω–æ—Å—Ç—å, –∑–æ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏) | ‚è≥ |
| –§–æ—Ä–º—É–ª—ã (targetScore, rabbitCount, wallClusters, wallLength) | ‚è≥ |
| checkLevelComplete (–æ–¥–∏–Ω–æ—á–Ω–∞—è –∏ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä) | ‚è≥ |

---

### –≠—Ç–∞–ø 4: 2 –∏–≥—Ä–æ–∫–∞ + —Ç–µ—Å—Ç—ã ‚è≥

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|--------|--------|
| –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∏–≥—Ä–∞ 2 –∏–≥—Ä–æ–∫–æ–≤ (WASD + —Å—Ç—Ä–µ–ª–∫–∏) | ‚è≥ |
| –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –∑–º–µ–µ–∫ –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º | ‚è≥ |
| –õ–æ–≥–∏–∫–∞ –ø–æ–±–µ–¥—ã —É—Ä–æ–≤–Ω—è (–≤—ã–∂–∏–≤—à–∏–π, –Ω–∏—á—å—è, –ø–æ–±–µ–¥ –±–æ–ª—å—à–µ) | ‚è≥ |
| –¢–µ—Å—Ç—ã | ‚è≥ |

---

### –≠—Ç–∞–ø 5: –ë–æ—Ç—ã (1 –±–æ—Ç + vision + heuristic) ‚è≥

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|--------|--------|
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è vision-–º–∞—Ç—Ä–∏—Ü—ã (20√ó20, –ø–æ–≤—ë—Ä–Ω—É—Ç–∞—è) | ‚è≥ —Å–∫–µ–ª–µ—Ç |
| –≠–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º (3 —Ö–æ–¥–∞, flood-fill, –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ) | ‚è≥ —Å–∫–µ–ª–µ—Ç |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±–æ—Ç–æ–≤ –≤ game loop | ‚è≥ |
| –¢–µ—Å—Ç—ã: –±–æ—Ç –Ω–µ –≤—ã–±–∏—Ä–∞–µ—Ç —Å–º–µ—Ä—Ç–µ–ª—å–Ω—ã–π —Ö–æ–¥ | ‚è≥ |

---

### –≠—Ç–∞–ø 6: 2+ –±–æ—Ç–æ–≤ (–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ) ‚è≥

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|--------|--------|
| –ë–æ—Ç—ã —É—á–∏—Ç—ã–≤–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –≤ vision | ‚è≥ |
| –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç: 4 –±–æ—Ç–∞ –≤—ã–∂–∏–≤–∞—é—Ç N —Ç–∏–∫–æ–≤ | ‚è≥ |

---

### –≠—Ç–∞–ø 7: –°–º–µ—à–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –∏ –ø–æ–ª–∏—Ä–æ–≤–∫–∞ ‚è≥

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å |
|--------|--------|
| –õ—é–±–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤ + –±–æ—Ç–æ–≤ | ‚è≥ |
| –ü–æ–ª–Ω–∞—è –∑–∞–ø–∏—Å—å/—á—Ç–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ localStorage | ‚è≥ —á–∞—Å—Ç–∏—á–Ω–æ |
| –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å —Ç–∞–±–ª–∏—Ü–µ–π —Ä–µ–∫–æ—Ä–¥–æ–≤ | ‚è≥ —á–∞—Å—Ç–∏—á–Ω–æ |
| –ü–æ–ª–∏—Ä–æ–≤–∫–∞ UI, edge cases | ‚è≥ |
| –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ | ‚è≥ |

---

## –£—Ç–æ—á–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑—á–∏–∫–∞ (–ª–æ–≥)

1. **–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ**: `Math.floor()` –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º—É–ª
2. **–ú–∞–∫—Å–∏–º—É–º 2 –∏–≥—Ä–æ–∫–∞** (–Ω–µ 3), —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WASD –∏ —Å—Ç—Ä–µ–ª–∫–∏
3. **0 –∏–≥—Ä–æ–∫–æ–≤**: —Ä–µ–∂–∏–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è ‚Äî –±–æ—Ç—ã –∏–≥—Ä–∞—é—Ç, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ—Ç—Ä–∏—Ç
4. **–°—Ç–µ–Ω—ã**: –Ω–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã, BFS-–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏
5. **difficultyLevel**: 1‚Äì10
6. **–ü–æ–±–µ–¥–∏—Ç–µ–ª—å**: –≤—ã–∂–∏–≤—à–∏–π ‚Üí –ø–æ –ø–æ–±–µ–¥ ‚Üí –ø–æ –∫—Ä–æ–ª–∏–∫–∞–º
7. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º
8. **–í—ë—Ä—Å—Ç–∫–∞ –º–µ–Ω—é**: grid, –ø—Ä–∞–≤—ã–π –∫—Ä–∞–π —Ä–æ–≤–Ω—ã–π, –∫–Ω–æ–ø–∫–∞ Start –ø–æ —Ü–µ–Ω—Ç—Ä—É
9. **–ò–º–µ–Ω–∞**: —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ localStorage, –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞
10. **–°—Ç–∏–ª–∏**: CSS-–∫–ª–∞—Å—Å—ã + custom properties, –±–µ–∑ inline
11. **–¶–µ–ª—å –ø–æ –∫—Ä–æ–ª–∏–∫–∞–º –∫—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è**: –æ—á–∫–∏ –∫–æ–ø—è—Ç—Å—è —á–µ—Ä–µ–∑ —É—Ä–æ–≤–Ω–∏
12. **difficultyLevel –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é = 1**
13. **–¶–≤–µ—Ç —Å–µ—Ç–∫–∏** ‚Üí —Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π (#cccccc)
14. **–ö—Ä–æ–ª–∏–∫–∏**: –Ω–µ —Ä–∞–∑–º–Ω–æ–∂–∞—é—Ç—Å—è –ø—Ä–∏ 4+ —Å–æ—Å–µ–¥—è—Ö –≤ —Ä–∞–¥–∏—É—Å–µ 4 –∫–ª–µ—Ç–æ–∫; –ø–µ—Ä–∏–æ–¥ adult 50‚Äì100 —Ç–∏–∫–æ–≤
15. **–ü–∞—É–∑–∞** –ø–æ –ø—Ä–æ–±–µ–ª—É
16. **HUD**: —Ç–∞–±–ª–æ –∏–≥—Ä–æ–∫–∞ 1 —Å–ª–µ–≤–∞, –∏–≥—Ä–æ–∫–∞ 2 —Å–ø—Ä–∞–≤–∞, –±–æ—Ç–æ–≤ —Å–Ω–∏–∑—É
17. **Dev mode**: –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞, –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–ø—Ä–∞–≤–∞
18. **Dev mode**: –ø—Ä–∏ –ø—Ä–æ–∏–≥—Ä—ã—à–µ —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
19. **–ó–º–µ–π–∫–∞**: –≥–æ–ª–æ–≤–∞ —Ç–µ–º–Ω–µ–µ —Ç–µ–ª–∞, —á—ë—Ä–Ω—ã–µ –≥–ª–∞–∑–∫–∏, –º—ë—Ä—Ç–≤—ã–µ —Å–µ—Ä—ã–µ, –Ω–µ –∏—Å—á–µ–∑–∞—é—Ç
20. **–ö—Ä–æ–ª–∏–∫–∏**: –∫—Ä—É–∂–∫–∏; –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª (young 0-50, adult 50-100, old 100-150, —Å–º–µ—Ä—Ç—å –Ω–∞ 150)
21. **–ü—Ä–∏—á–∏–Ω–∞ —Å–º–µ—Ä—Ç–∏** –ø—Ä–∏ —Å–∞–º–æ—É–∫—É—Å–µ: ¬´–°—ä–µ–ª–∞ —Å–∞–º—É —Å–µ–±—è¬ª
22. **Dev panel**: –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, per-level –≤ localStorage, —ç–∫—Å–ø–æ—Ä—Ç JSON
23. **–ï–¥–∏–Ω—ã–π JSON** (`gameDefaults.json`), `constants.ts` —É–¥–∞–ª—ë–Ω
24. **–ö–æ–Ω–µ—Ü —É—Ä–æ–≤–Ω—è**: –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
25. **–ü–∞—É–∑–∞**: –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å overlay –∏ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ–º
26. **–≠—Ç–∞–ø 3 —Ä–∞–∑–¥–µ–ª—ë–Ω** –Ω–∞ 3a (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª), 3b (dev mode), 3c (—Ç–µ—Å—Ç—ã)
27. **–û–±–≤–æ–¥–∫–∞ —Å–µ–≥–º–µ–Ω—Ç–æ–≤**: —Ç–æ–Ω–∫–∞—è —Ç—ë–º–Ω–∞—è –æ–±–≤–æ–¥–∫–∞ –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ —Ç–µ–ª–∞ –∑–º–µ–π–∫–∏
28. **–°—Ç–µ–Ω—ã**: –∑–æ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–æ–∫—Ä—É–≥ —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏–π –∑–º–µ–µ–∫ (1.5 √ó initialSnakeLength)
29. **Dev mode overlay**: –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–≥—Ä–æ–≤—É—é –æ–±–ª–∞—Å—Ç—å, –Ω–µ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫
